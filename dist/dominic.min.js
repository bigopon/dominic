!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Dominic=t()}(this,function(){function e(e){return"[object Object]"===H.call(e)}function t(e){if(e=e||[],arguments.length<2)return e;for(var t=e.length,r=1;r<arguments.length;r++)for(var n=arguments[r],o=0;o<n.length;o++)e[t++]=n[o];return e}function r(e,t,r){if(e)for(var n=0;n<e.length;n++)t.call(r,e[n],n)}function n(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n=Object.keys(r),o=0;o<n.length;o++)e[n[o]]=r[n[o]]}return e}function o(e){if(e=e||{},arguments.length<2)return e;var t=arguments[arguments.length-1];if("string"!=typeof t)return e;var r=t.split(",");if(!r.length)return e;for(var n=1;n<arguments.length-1;n++){var o=arguments[n];if(o)for(var a=Object.keys(arguments[n]),l=0;l<a.length;l++){var i=a[l];if(-1!==r.indexOf(i)){var f=o[i];e[i]=f}}}return e}function a(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n=Object.keys(arguments[t]),o=0;o<n.length;o++){var a=n[o];if(Array.isArray(e))for(var l=0;l<e.length;l++)e[l].hasOwnProperty(a)||(e[l][a]=r[a]);else e.hasOwnProperty(a)||(e[a]=r[a])}}return e}function l(e){var t=e.id?"#"+e.id:"",r=e.classList.toString(),n=r?r.split(" "):D,o=e.localName+t+(n.length?"."+n.join("."):"");return o}function i(e,t,r){for(var n=null,o=e.childNodes,a=o.length,l=0;a>l;l++){var f=o[l];if(n=!Z.call(f,t)||"undefined"!=typeof r&&f[t]!==r?i(f,t,r):f)return n}return n}function f(e,t,r){for(var n=e.childNodes,o=n.length,a=0;o>a;a++){var l=n[a];if(Z.call(l,t)&&("undefined"==typeof r||l[t]===r))return l}return null}function u(e,t,r){for(var n=[],o=e.childNodes,a=o.length,l=0;a>l;l++){var i=o[l];Z.call(i,t)&&i[t]===r&&(n[n.length]=i)}return n}function c(e,r,n){for(var o=[],a=e.childNodes,l=a.length,i=0;l>i;i++){var f=a[i];Z.call(f,r)&&f[r]===n&&(o[o.length]=f),t(o,c(f,r,n))}return o}function s(e,t,r){for(;t&&t!==e;){if($.call(t,r))return t;t=t.parentNode}return null}function v(e,t,r){t=t||{};var n=t.el||q.documentElement,o=t.callback,a=t.capture||!1,l=t.delegate,i=function(e){var t=e.currentTarget;if("string"==typeof l){if(t===e.target)return;var n=s(t,e.target,l);if(!n)return;"function"==typeof o&&o.call(r,e,n,l)}else"function"==typeof o&&o.call(r,e)};return i.destroy=function(){return this.el=null,n.removeEventListener(e,i,a)},i.el=n,i.type=e,i.capture=a,n.addEventListener(e,i,a),i}function p(e,t,r){t=t||{};var n,o=t.el||q.documentElement,a=t.callback,l=t.capture,i=t.delegate;Z.call(t,"key")&&("number"==typeof t.key?n=[t.key]:I(t.key,"number")&&(n=t.key));var f=function(e){var t=e.currentTarget;if("string"==typeof i){if(t===e.target)return;var o=s(t,e.target,i);if(!o)return;if(n&&-1===n.indexOf(e.keyCode))return;"function"==typeof a&&a.call(r,e,o,i)}else{if(n&&-1===n.indexOf(e.keyCode))return;"function"==typeof a&&a.call(r,e)}};return f.destroy=function(){return this.el=null,o.removeEventListener(e,f,l)},f.el=o,f.type=e,f.capture=l,o.addEventListener(e,f,l),f}function h(e,t,r){var n=t.ref;if(F(n)){var o=t.refScope,a="parent"===o?e:r;a.refs=a.refs||new Q,a.refs[n]=t,t.__hr=!0}}function d(e,t,r){var n=t["for"];if(!n)return null;var o,a=t.root||"",l=a?n[a]:n,i=t.tplFn;if(l&&"function"==typeof i){var f=t.scope,u="root"===f?r:"parent"===f?e:f;if(Array.isArray(l))o=l.map(i,u);else if(z(l)&&t.alwaysIterate){var c=Object.keys(l);o=c.map(function(e){return i.call(u,l[e],e)})}else o=i.call(u,l)}return o}function y(e,t,r,n){return r.observe=r.observe||new U(r),r.observe.add(e,t,n),r.observe}function g(e,t,r,n,o){var a=t.fn;if("function"==typeof a){var l=t.scope,i="root"===l?r:"parent"===l?e:l,f=a.call(i);A(e,f,r,n,o)}}function m(e,t,r,n,o){if(Z.call(t,"observeProp")){var a=t.observeProp;if(F(a)){var l=y(e,t,r,n);l[a]=t["for"]}}else{var i=d(e,t,r);W(i)&&k(i,n),A(e,i,r,n,o)}}function b(e,t){for(var r=Object.keys(t),n=e.style,o=0;o<r.length;o++){var a=r[o];if(""===n[a]){var l=t[a];-1!==X.indexOf(a)?n[a]=isNaN(l)?l:l+"px":n[a]=l}}}function _(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],a=V(o);if(!e.hasAttribute(a)){var l=t[o];e.setAttribute(a,l)}}}function k(e,t){for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];"style"===r?b(e,n):"attrs"===r?_(e,n):e[r]=n}}function O(e,t,r,n,o){for(var l=0;l<t.length;l++){var i=t[l];W(i)?(k(i,n),A(e,i,r,n,o)):(n&&!F(i)&&a(i,n),A(e,i,r,n,o))}}function w(e,t,r,n,o){var l=""+(t.tag||"div");delete t.tag,n&&a(t,n);var i=Ne(l,t,r);A(e,i,r,n,o)}function E(e,t){return e?Z.call(e,"__key")&&e.__key===t?E(e.nextSibling,t):e:null}function j(e,t,r){var n=r.startEl.nextSibling;if(n){var o=t.__key,a=E(n,o);a?e.insertBefore(t,a):e.appendChild(t)}else e.appendChild(t)}function A(e,t,r,n,o){"use strict";if(t){if(F(t)){var l=q.createTextNode(t);return k(l,n),void(o&&o.startEl?(j(e,l,o),o.startEl=l):e.appendChild(l))}if(W(t))o&&o.startEl?(j(e,t,o),o.startEl=t):e.appendChild(t),h(e,t,r);else if("function"==typeof t){var i=t();n&&a(i,n),A(e,i,r,n,o)}else Array.isArray(t)?O.apply(null,arguments):Z.call(t,"for")?m.apply(null,arguments):Z.call(t,"fn")?g.apply(null,arguments):w.apply(null,arguments)}}function N(e,t,r){var n=t.type;if(!n)throw new Error("No event type specified");var o,a=t.handler,i=typeof a;r=r||e;var f="root"===t.scope?r:t.scope?t.scope:e;if("function"===i?o=a:"string"===i&&(o=f[a]),"function"!=typeof o)throw new Error('Cannot find handler: "'+a+'" on element: ['+l(f)+"].");var u,c=t.capture,s=t.delegate,h=-1!==ie.indexOf(n);u=h?p(n,{el:e,callback:o,capture:c,delegate:s,key:t.key},f):v(n,{el:e,callback:o,capture:c,delegate:s,key:t.key},f),e&&(e.evts=e.evts||new K),e.evts.push(u),e.__he=!0}function x(e,t,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)N(e,t[n],r);else N(e,t,r)}function C(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],a=t[o],l=V(o);e.setAttribute(l,a)}}function P(e,t){for(var r=Object.keys(t),n=e.style,o=0;o<r.length;o++){var a=r[o],l=t[a];-1!==X.indexOf(a)?n[a]=isNaN(l)?l:l+"px":n[a]=l}}function S(e,t,r,n){for(var o=0,a=t.length;a>o;o++){var l=t[o];Y["set"+l.key](e,l.val,r,n)}}function L(e,t,r){for(var o=0,a=t.length;a>o;o++){var l=t[o],i=n({},{type:l.key},l.val);N(e,i,r)}}function M(e){var t;return t="function"==typeof e?e():e,Boolean(t)}var T=this||{},q=T.document,B=T.Node,D=[],R={},H=R.__proto__.toString,I=(R.__proto__.hasOwnProperty,function(e,t){if(!Array.isArray(e))return!1;for(var r=0,n=e.length,o=0;n>o;o++)r+=typeof e[o]===t?1:0;return r===n}),W=function(e){return e instanceof B},z=function(e){var t=typeof e;return e&&"object"===t||"function"===t},F=function(e){var t=typeof e;return"string"===t||"number"===t},V=function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()},Z=Object.prototype.hasOwnProperty,$=function(){var e=T.HTMLElement,t=e?e.prototype:{},r=t.matches||t.matchesSelector||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector;return r}(),G=Object.defineProperties,J=Object.defineProperty,K=function(){var e=function(){Array.call(this)};return e.prototype=Object.create(Array.prototype),G(e.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=[],r=0,n=0;n<this.length;n++)e.call(null,this[n])&&t.push(this[n]);for(var o=0;o<t.length;o++){var a=t[o];a.destroy(),this.splice(this.indexOf(a),1),r++}return r==t.length}},removeEvent:{value:function(e,t,r){var n=this,o=[];return this.forEach(function(n){"*"!==e&&n.type!==e||"*"!==t&&n.el!==t||r&&n.capture!==r||o.push(n)}),o.forEach(function(e){e.destroy(),n.splice(n.indexOf(e),1)}),o.length}},removeAll:{value:function(){for(var e=0;e<this.length;e++)this[e].destroy();this.length=0}}}),e}(),Q=function(){var e=function(){};return e.prototype=Object.create(Object.prototype),G(e.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=Object.keys(this),r=0,n=0;n<t.length;n++){var o=t[n];e.call(null,this[o],o)&&(r+=delete this[o]?1:0)}return r==t.length}},removeRef:{value:function(e){return Z.call(this,e)?delete this[e]:!1}},removeAll:{value:function(){for(var e=Object.keys(this),t=0;t<e.length;t++)delete this[e[t]];return t===e.length}}}),e}(),U=function(){function e(e){e.evts.removeAll(),delete e.evts}function t(t){Z.call(t,"evts")&&e(t);var n=c(t,"__he",!0);r(n,e)}function a(e,t){var r=Z.call(e,"refScope")&&"parent"===e.refScope?"p":"r";"p"===r?e.parentNode.refs.removeRef(e.ref):t.refs.removeRef(e.ref)}function l(e,t){Z.call(e,"refs")&&(e.refs.removeAll(),delete e.refs),Z.call(e,"ref")&&a(e,t);var n=c(e,"__hr",!0);r(n,function(e){a(e,t)})}function i(e,n){r(e,function(e,r){e.nodeType===B.ELEMENT_NODE&&(l(e,n),t(e)),e.parentNode.removeChild(e)})}function f(e,t,r,n,o){var a=t.observeProp;this.__data[a]=o,t["for"]=o;var l,f=u(e,"__key",n),c=!1;if(f.length){if(l=f[0].previousSibling,null===l){var s=e.childNodes;s.length>f.length&&(l=e.insertBefore(q.createElement("a"),s[0]),c=!0)}i(f,this.__owner)}else l=e.lastChild;var v=d(e,t,this.__owner);W(v)&&k(v,r),A(e,v,this.__owner,r,{startEl:l}),c&&e.removeChild(l)}var s=function(e){if("undefined"==typeof e)throw new Error("No root provided");G(this,{__owner:{value:e},__data:{value:{}}})};s.prototype=Object.create(Object.prototype);var v=Math.floor(1e5*Math.random());return G(s.prototype,{add:{value:function(e,t,r){var a=t.observeProp;if(a&&"__owner"!==a){var l=v++ +"",i=n({__key:l},r),u=o({},t,"tplFn,scope,for,root,observeProp,alwaysIterate");J(this,a,{get:function(e){return this.__data[e]}.bind(this,a),set:f.bind(this,e,u,i,l)})}}},push:{value:function(e,t){e=""+e;var r=this[e];if(!r||!Array.isArray(r))throw new Error("Value for property ["+e+"] is not an array.");if(Array.isArray(t))for(var n=0;n<t.length;n++)r.push(t[n]);else r.push(t);return this[e]=r,r.length}}}),s}(),X=["width","height","maxWidth","minWidth","maxHeight","minHeight"];!["","Top","Right","Bottom","Left"].forEach(function(e){X.push("padding"+e),X.push("margin"+e)});var Y={setevents:x,setattrs:C,setstyle:P,setchildren:A,setitems:A},ee=X,te=["color","backgroundColor","background","display","position","border","transform","opacity","fontSize"],re=["defaults"],ne=["style","children","items","attrs","events"],oe=["click","mousedown","mouseup","mouseover","mouseout","mouseenter","mouseleave","mousemove"],ae=["dragstart","dragend","drag","dragover","dragenter","dragleave","drop"],le=["blur","focus"],ie=["keydown","keypress","keyup"],fe=["change","input","submit"],ue=["touchstart","touchmove","touchend"],ce=["wheel","scroll"],se=oe.concat(ae,le,ie,fe,ue,ce),ve=["created","appended"],pe=["className","cls"],he=["xtraCls","xCls"],de=["text","textContent"],ye=["parent"],ge=ee.concat(te,re,ne,se,ve,pe,he,de,ye),me=ee.length,be=me+te.length,_e=be+re.length,ke=_e+ne.length,Oe=ke+se.length,we=Oe+ve.length,Ee=we+pe.length,je=Ee+he.length,Ae=je+de.length,Ne=function(e,t,r,o){if(t=t||R,t.hasOwnProperty("if")&&!M(t["if"]))return null;var a=q.createElement(e);r=r||a;var l,i,f,u,c,s,v,p=Object.keys(t),h=a.style;t.hasOwnProperty("hide")&&M(t.hide)&&(v=!0);for(var d=0,y=p.length;y>d;d++){var g=p[d],m=t[g],b=ge.indexOf(g);-1==b?a[g]=m:me>b?h[g]=isNaN(m)?m:m+"px":be>b?h[g]=m:_e>b?n(s=s||{},m):ke>b?(l=l||[]).push({key:g,val:m}):Oe>b?(i=i||[]).push({key:g,val:m}):we>b?(f=f||{})[g]=m:Ee>b?u=(u||"")+" "+m:je>b?u=(u||"")+" "+m:Ae>b?a.appendChild(q.createTextNode(m)):c=m}return l&&S(a,l,r,s),u&&(a.className+=(" "+u).trim()),i&&L(a,i,r),f&&"function"==typeof f.created&&f.created.call(a),a===r?c&&W(c)&&(c.appendChild(a),f&&"function"==typeof f.appended&&f.appended.call(a,c)):a.root=r,v&&(h.display="none"),a},xe={__proto__:null};return G(xe,{isPlainObject:{value:function(t){return e(t)}},createElement:{value:function(e,t){var r=typeof e;if("number"===r)throw Error("Invalid element tag name");return"string"===r?Ne(e,t):Ne("div",e)}},handleEvent:{value:function(t,r,o){var a=t;if("root"===o?a=t.root||t:"undefined"!=typeof o&&(a=o),e(r))for(var l=Object.keys(r),i=[],f=0;f<l.length;f++){var u=l[f],c=r[u];i.push({key:u,val:c}),Y.setevents(t,n({type:u},c),a)}else Y.setevents(t,r,a)}},setWindow:{value:function(e){T=e,q=T.document,B=T.Node}},queryAll:{value:c},queryAllDirect:{value:u},query:{value:i},queryDirect:{value:f}}),xe});