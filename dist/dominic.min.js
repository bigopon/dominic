!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Dominic=t()}(this,function(){function e(e){if(e=e||[],arguments.length<2)return e;for(var t=e.length,r=1;r<arguments.length;r++)for(var n=arguments[r],o=0;o<n.length;o++)e[t++]=n[o];return e}function t(e,t,r){if(e)for(var n=0;n<e.length;n++)t.call(r,e[n],n)}function r(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n=Object.keys(r),o=0;o<n.length;o++)e[n[o]]=r[n[o]]}return e}function n(e){if(e=e||{},arguments.length<2)return e;var t=arguments[arguments.length-1];if("string"!=typeof t)return e;var r=t.split(",");if(!r.length)return e;for(var n=1;n<arguments.length-1;n++){var o=arguments[n];if(o)for(var a=Object.keys(arguments[n]),i=0;i<a.length;i++){var l=a[i];if(-1!==r.indexOf(l)){var f=o[l];e[l]=f}}}return e}function o(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n=Object.keys(arguments[t]),o=0;o<n.length;o++){var a=n[o];if(Array.isArray(e))for(k=0;k<e.length;k++)e[k].hasOwnProperty(a)||(e[k][a]=r[a]);else e.hasOwnProperty(a)||(e[a]=r[a])}}return e}function a(e){var t=e.id?"#"+e.id:"",r=e.classList.toString(),n=r?r.split(" "):B,o=e.localName+t+(n.length?"."+n.join("."):"");return o}function i(e,t,r){for(var n=[],o=e.childNodes,a=o.length,i=0;a>i;i++){var l=o[i];F.call(l,t)&&l[t]===r&&(n[n.length]=l)}return n}function l(t,r,n){for(var o=[],a=t.childNodes,i=a.length,f=0;i>f;f++){var u=a[f];u.hasOwnProperty(r)&&u[r]===n&&(o[o.length]=u),e(o,l(u,r,n))}return o}function f(e,t,r){for(;t&&t!==e;){if(V.call(t,r))return t;t=t.parentNode}return null}function u(e,t,r){t=t||{};var n=t.el||M.documentElement,o=t.callback,a=t.capture||!1,i=t.delegate,l=function(e){var t=e.currentTarget;if("string"==typeof i){if(t===e.target)return;var n=f(t,e.target,i);if(!n)return;"function"==typeof o&&o.call(r,e,n,i)}else"function"==typeof o&&o.call(r,e)};return l.destroy=function(){return this.el=null,n.removeEventListener(e,l,a)},l.el=n,l.type=e,l.capture=a,n.addEventListener(e,l,a),l}function c(e,t,r){t=t||{};var n,o=t.el||M.documentElement,a=t.callback,i=t.capture,l=t.delegate;F(t,"key")&&("number"==typeof t.key?n=[t.key]:z(t.key,"number")&&(n=t.key));var u=function(e){var t=e.currentTarget;if("string"==typeof l){if(t===e.target)return;var o=f(t,e.target,l);if(!o)return;if(n&&-1===n.indexOf(e.keyCode))return;"function"==typeof a&&a.call(r,e,o,l)}else{if(n&&-1===n.indexOf(e.keyCode))return;"function"==typeof a&&a.call(r,e)}};return u.destroy=function(){return this.el=null,o.removeEventListener(e,u,i)},u.el=o,u.type=e,u.capture=i,o.addEventListener(e,u,i),u}function s(e,t,r){var n=t.ref;if(W(n)){var o=t.refScope,a="parent"===o?e:r;a.refs=a.refs||new J,a.refs[n]=t,t.__hr=!0}}function v(e,t,r){var n=t["for"];if(!n)return null;var o,a=t.root||"",i=a?n[a]:n,l=t.tplFn;if(i&&"function"==typeof l){var f=t.scope,u="root"===f?r:"parent"===f?e:f;if(Array.isArray(i))o=i.map(l,u);else if(I(i)&&t.alwaysIterate){var c=Object.keys(i);o=c.map(function(e){return l.call(u,i[e],e)})}else o=l.call(u,i)}return o}function p(e,t,r,n){return r.observe=r.observe||new K(r),r.observe.add(e,t,n),r.observe}function h(e,t,r,n,o){var a=t.fn;if("function"==typeof a){var i=t.scope,l="root"===i?r:"parent"===i?e:i,f=a.call(l);E(e,f,r,n,o)}}function d(e,t,r,n,o){if(F.call(t,"observeProp")){var a=t.observeProp;if(W(a)){var i=p(e,t,r,n);i[a]=t["for"]}}else{var l=v(e,t,r);H(l)&&m(l,n),E(e,l,r,n,o)}}function y(e,t){for(var r=Object.keys(t),n=e.style,o=0;o<r.length;o++){var a=r[o];if(""===n[a]){var i=t[a];-1!==Q.indexOf(a)?n[a]=isNaN(i)?i:i+"px":n[a]=i}}}function g(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],a=D(o);if(!e.hasAttribute(a)){var i=t[o];e.setAttribute(a,i)}}}function m(e,t){for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];"style"===r?y(e,n):"attrs"===r?g(e,n):e[r]=n}}function b(e,t,r,n,a){for(var i=0;i<t.length;i++){var l=t[i];H(l)?(m(l,n),E(e,l,r,n,a)):(n&&!W(l)&&o(l,n),E(e,l,r,n,a))}}function O(e,t,r,n,a){var i=""+(t.tag||"div");delete t.tag,n&&o(t,n);var l=xe(i,t,r);E(e,l,r,n,a)}function w(e,t){return e?F.call(e,"__key")&&e.__key===t?w(e.nextSibling,t):e:null}function _(e,t,r){var n=r.startEl.nextSibling;if(n){var o=t.__key,a=w(n,o);a?e.insertBefore(t,a):e.appendChild(t)}else e.appendChild(t)}function E(e,t,r,n,a){"use strict";if(t){if(W(t)){var i=M.createTextNode(t);return m(i,n),void(a&&a.startEl?(_(e,i,a),a.startEl=i):e.appendChild(i))}if(H(t))a&&a.startEl?(_(e,t,a),a.startEl=t):e.appendChild(t),s(e,t,r);else if("function"==typeof t){var l=t();n&&o(l,n),E(e,l,r,n,a)}else Array.isArray(t)?b.apply(null,arguments):F.call(t,"for")?d.apply(null,arguments):F.call(t,"fn")?h.apply(null,arguments):O.apply(null,arguments)}}function x(e,t,r){var n=t.type;if(!n)throw new Error("No event type specified");var o,i=t.handler,l=typeof i;r=r||e;var f="root"===t.scope?r:t.scope?t.scope:e;if("function"===l?o=i:"string"===l&&(o=f[i]),"function"!=typeof o)throw new Error('Cannot find handler: "'+i+'" on element: ['+a(f)+"].");var s,v=t.capture,p=t.delegate,h=-1!==ae.indexOf(n);s=h?c(n,{el:e,callback:o,capture:v,delegate:p,key:t.key},f):u(n,{el:e,callback:o,capture:v,delegate:p,key:t.key},f),e&&(e.evts=e.evts||new G),e.evts.push(s),e.__he=!0}function A(e,t,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)x(e,t[n],r);else x(e,t,r)}function N(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],a=t[o],i=D(o);e.setAttribute(i,a)}}function j(e,t){for(var r=Object.keys(t),n=e.style,o=0;o<r.length;o++){var a=r[o],i=t[a];-1!==Q.indexOf(a)?n[a]=isNaN(i)?i:i+"px":n[a]=i}}function C(e,t,r,n){for(var o=0,a=t.length;a>o;o++){var i=t[o];U["set"+i.key](e,i.val,r,n)}}function P(e,t,n){for(var o=0,a=t.length;a>o;o++){var i=t[o],l=r({},{type:i.key},i.val);x(e,l,n)}}function S(e){var t;return t="function"==typeof e?e():e,Boolean(t)}var L=this||{},M=L.document,T=L.Node,B=[],R={},z=function(e,t){if(!Array.isArray(e))return!1;for(var r=0,n=e.length,o=0;n>o;o++)r+=typeof e[o]===t?1:0;return r===n},H=function(e){return e instanceof T},I=function(e){var t=typeof e;return e&&"object"===t||"function"===t},W=function(e){var t=typeof e;return"string"===t||"number"===t},D=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},F=Object.prototype.hasOwnProperty,$=window.HTMLElement.prototype,V=$.matches||$.msMatchesSelector||$.webkitMatchesSelector||$.mozMatchesSelector||$.oMatchesSelector,Z=Object.defineProperties,q=Object.defineProperty,G=function(){var e=function(){Array.call(this)};return e.prototype=Object.create(Array.prototype),Z(e.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=[],r=0,n=0;n<this.length;n++)e.call(null,this[n])&&t.push(this[n]);for(var o=0;o<t.length;o++){var a=t[o];a.destroy(),this.splice(this.indexOf(a),1),r++}return r==t.length}},removeEvent:{value:function(e,t,r){var n=this,o=[];return this.forEach(function(n){"*"!==e&&n.type!==e||"*"!==t&&n.el!==t||r&&n.capture!==r||o.push(n)}),o.forEach(function(e){e.destroy(),n.splice(n.indexOf(e),1)}),o.length}},removeAll:{value:function(){for(var e=0;e<this.length;e++)this[e].destroy();this.length=0}}}),e}(),J=function(){var e=function(){};return e.prototype=Object.create(Object.prototype),Z(e.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=Object.keys(this),r=0,n=0;n<t.length;n++){var o=t[n];e.call(null,this[o],o)&&(r+=delete this[o]?1:0)}return r==t.length}},removeRef:{value:function(e){return F.call(this,e)?delete this[e]:!1}},removeAll:{value:function(){for(var e=Object.keys(this),t=0;t<e.length;t++)delete this[e[t]];return t===e.length}}}),e}(),K=function(){function e(e){e.evts.removeAll(),delete e.evts}function o(r){F.call(r,"evts")&&e(r);var n=l(r,"__he",!0);t(n,e)}function a(e,t){var r=F.call(e,"refScope")&&"parent"===e.refScope?"p":"r";"p"===r?e.parentNode.refs.removeRef(e.ref):t.refs.removeRef(e.ref)}function f(e,r){F.call(e,"refs")&&(e.refs.removeAll(),delete e.refs),F.call(e,"ref")&&a(e,r);var n=l(e,"__hr",!0);t(n,function(e){a(e,r)})}function u(e,r){t(e,function(e,t){e.nodeType===T.ELEMENT_NODE&&(f(e,r),o(e)),e.parentNode.removeChild(e)})}var c=function(e){if("undefined"==typeof e)throw new Error("No root provided");Z(this,{__owner:{value:e},__data:{value:{}}})};c.prototype=Object.create(Object.prototype);var s=Math.floor(1e5*Math.random());return Z(c.prototype,{add:{value:function(e,t,o){var a=t.observeProp;if(a&&"__owner"!==a){var l=s++ +"",f=r({__key:l},o),c=n({},t,{obsProp:a},"tplFn,for,root,observeProp,alwaysIterate");q(this,a,{get:function(e){return this.__data[e]}.bind(this,a),set:function(e,t,r,n,o){var a=t.obsProp;this.__data[a]=o,t["for"]=o;var l,f=i(e,"__key",n),c=!1;if(f.length){if(l=f[0].previousSibling,null===l){var s=e.childNodes;s.length>f.length&&(l=e.insertBefore(M.createElement("a"),s[0]),c=!0)}u(f,this.__owner)}else l=e.lastChild;var p=v(e,t,this.__owner);H(p)&&m(p,r),E(e,p,this.__owner,r,{startEl:l}),c&&e.removeChild(l)}.bind(this,e,c,f,l)})}}},push:{value:function(e,t){e=""+e;var r=this[e];if(!r||!Array.isArray(r))throw new Error("Value for property ["+e+"] is not an array.");if(Array.isArray(t))for(var n=0;n<t.length;n++)r.push(t[n]);else r.push(t);return this[e]=r,r.length}}}),c}(),Q=["width","height","maxWidth","minWidth","maxHeight","minHeight"];!["","Top","Right","Bottom","Left"].forEach(function(e){Q.push("padding"+e),Q.push("margin"+e)});var U={setevents:A,setattrs:N,setstyle:j,setchildren:E,setitems:E},X=Q,Y=["color","backgroundColor","background","display","position","border","transform","opacity","fontSize"],ee=["defaults"],te=["style","children","items","attrs","events"],re=["click","mousedown","mouseup","mouseover","mouseout","mouseenter","mouseleave","mousemove"],ne=["dragstart","dragend","drag","dragover","dragenter","dragleave","drop"],oe=["blur","focus"],ae=["keydown","keypress","keyup"],ie=["change","input","submit"],le=["touchstart","touchmove","touchend"],fe=["wheel","scroll"],ue=re.concat(ne,oe,ae,ie,le,fe),ce=["created","appended"],se=["className","cls"],ve=["xtraCls","xCls"],pe=["text","textContent"],he=["parent"],de=X.concat(Y,ee,te,ue,ce,se,ve,pe,he),ye=X.length,ge=ye+Y.length,me=ge+ee.length,be=me+te.length,ke=be+ue.length,Oe=ke+ce.length,we=Oe+se.length,_e=we+ve.length,Ee=_e+pe.length,xe=function(e,t,n,o){if(t=t||R,t.hasOwnProperty("if")&&!S(t["if"]))return null;var a=M.createElement(e);n=n||a;var i,l,f,u,c,s,v,p=Object.keys(t),h=a.style;t.hasOwnProperty("hide")&&S(t.hide)&&(v=!0);for(var d=0,y=p.length;y>d;d++){var g=p[d],m=t[g],b=de.indexOf(g);-1==b?a[g]=m:ye>b?h[g]=isNaN(m)?m:m+"px":ge>b?h[g]=m:me>b?r(s=s||{},m):be>b?(i=i||[]).push({key:g,val:m}):ke>b?(l=l||[]).push({key:g,val:m}):Oe>b?(f=f||{})[g]=m:we>b?u=(u||"")+" "+m:_e>b?u=(u||"")+" "+m:Ee>b?a.appendChild(M.createTextNode(m)):c=m}return i&&C(a,i,n,s),u&&(a.className+=(" "+u).trim()),l&&P(a,l,n),f&&"function"==typeof f.created&&f.created.call(a),c&&H(c)&&a===n&&(c.appendChild(a),f&&"function"==typeof f.appended&&f.appended.call(a,c)),v&&(h.display="none"),a},Ae={};return Z(Ae,{createElement:{value:function(e,t){var r=typeof e;if("number"===r)throw Error("Invalid element tag name");return"string"===r?xe(e,t):xe("div",e)}},setWindow:{value:function(e){L=e,M=L.document,T=L.Node}}}),Ae});