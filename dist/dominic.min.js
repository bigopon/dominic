!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Dominic=t()}(this,function(){function e(e,t,r){if(e)for(var n=0;n<e.length;n++)t.call(r,e[n],n)}function t(e,t,r){if(e){for(var n=[],o=0;o<e.length;o++){var a=e[o];t.call(r,a,o)&&n.push(a)}return n}return null}function r(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n=Object.keys(r),o=0;o<n.length;o++)e[n[o]]=r[n[o]]}return e}function n(e){if(e=e||{},arguments.length<2)return e;var t=arguments[arguments.length-1];if("string"!=typeof t)return e;var r=t.split(",");if(!r.length)return e;for(var n=1;n<arguments.length-1;n++){var o=arguments[n];if(o)for(var a=Object.keys(arguments[n]),i=0;i<a.length;i++){var l=a[i];if(-1!==r.indexOf(l)){var f=o[l];e[l]=f}}}return e}function o(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n=Object.keys(arguments[t]),o=0;o<n.length;o++){var a=n[o];if(Array.isArray(e))for(k=0;k<e.length;k++)e[k].hasOwnProperty(a)||(e[k][a]=r[a]);else e.hasOwnProperty(a)||(e[a]=r[a])}}return e}function a(e){var t=e.id?"#"+e.id:"",r=e.classList.toString(),n=r?r.split(" "):T,o=e.localName+t+(n.length?"."+n.join("."):"");return o}function i(e,t,r){for(;t&&t!==e;){if(t.matches(r))return t;t=t.parentNode}return null}function l(e,t,r){t=t||{};var n=t.el||S.documentElement,o=t.callback,a=t.capture||!1,l=t.delegate,f=function(e){var t=e.currentTarget;if("string"==typeof l){if(t===e.target)return;var n=i(t,e.target,l);if(!n)return;"function"==typeof o&&o.call(r,e,n,l)}else"function"==typeof o&&o.call(r,e)};return f.destroy=function(){return this.el=null,n.removeEventListener(e,f,a)},f.el=n,f.type=e,f.capture=a,n.addEventListener(e,f,a),f}function f(e,t,r){t=t||{};var n,o=t.el||S.documentElement,a=t.callback,l=t.capture,f=t.delegate;"number"==typeof t.key?n=[t.key]:W(t.key,"number")&&(n=t.key);var u=function(e){var t=e.currentTarget;if("string"==typeof f){if(t===e.target)return;var o=i(t,e.target,f);if(!o)return;if(n&&-1===n.indexOf(e.keyCode))return;"function"==typeof a&&a.call(r,e,o,f)}else{if(n&&-1===n.indexOf(e.keyCode))return;"function"==typeof a&&a.call(r,e)}};return u.destroy=function(){return this.el=null,o.removeEventListener(e,u,l)},u.el=o,u.type=e,u.capture=l,o.addEventListener(e,u,l),u}function u(e,t,r){var n=t.ref;if(F(n)){var o=t.refScope,a="parent"===o?e:r;a.refs=a.refs||new $,a.refs[n]=t,t.setAttribute("data-hr","parent"===o?"pr":"rr")}}function s(e,t,r){var n=t["for"];if(!n)return null;var o,a=t.root||"",i=a?n[a]:n,l=t.tplFn;if(i&&"function"==typeof l){var f=t.scope,u="root"===f?r:"parent"===f?e:f;if(Array.isArray(i))o=i.map(l,u);else if(z(i)&&t.alwaysIterate){var s=Object.keys(i);o=s.map(function(e){return l.call(u,i[e],e)})}else o=l.call(u,i)}return o}function c(e,t,r,n){return r.observe=r.observe||new D(r),r.observe.add(e,t,n),r.observe}function p(e,t,r,n,o){var a=t.fn;if("function"==typeof a){var i=t.scope,l="root"===i?r:"parent"===i?e:i,f=a.call(l);w(e,f,r,n,o)}}function v(e,t,r,n,o){if(z(t.update)){var a=t.update.observeProp;if(F(a)){var i=c(e,t,r,n);i[a]=t["for"]}}else{var l=s(e,t,r);q(l)&&y(l,n),w(e,l,r,n,o)}}function h(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n];if(""===e.style[o]){var a=t[o];-1!==V.indexOf(o)?e.style[o]=isNaN(a)?a:a+"px":e.style[o]=a}}}function d(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],a=H(o);if(!e.hasAttribute(a)){var i=t[o];e.setAttribute(a,i)}}}function y(e,t){for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];"style"===r?h(e,n):"attrs"===r?d(e,n):e[r]=n}}function g(e,t,r,n,a){for(var i=0;i<t.length;i++){var l=t[i];q(l)?(y(l,n),w(e,l,r,n,a)):(n&&o(l,n),w(e,l,r,n,a))}}function m(e,t,r,n,a){var i=""+(t.tag||"div");delete t.tag,n&&o(t,n);var l=ke(i,t,r);w(e,l,r,n,a)}function b(e,t){return e?e.hasOwnProperty("__key")&&e.__key===t?b(e.nextSibling,t):e:null}function O(e,t,r){var n=r.startEl.nextSibling;if(n){var o=t.__key,a=b(n,o);a?e.insertBefore(t,a):e.appendChild(t)}else e.appendChild(t)}function w(e,t,r,n,a){"use strict";if(t){if(F(t)){var i=S.createTextNode(t);return void(a&&a.startEl?(O(e,i,a),a.startEl=i):e.appendChild(i))}if(q(t))a&&a.startEl?(O(e,t,a),a.startEl=t):e.appendChild(t),u(e,t,r);else if("function"==typeof t){var l=t();n&&o(l,n),w(e,l,r,n,a)}else Array.isArray(t)?g.apply(null,arguments):t.hasOwnProperty("for")?v.apply(null,arguments):t.hasOwnProperty("fn")?p.apply(null,arguments):m.apply(null,arguments)}}function A(e,t,r){var n=t.type;if(!n)throw new Error("No event type specified");var o,i=t.handler,u=typeof i;r=r||e;var s="root"===t.scope?r:t.scope?t.scope:e;if("function"===u?o=i:"string"===u&&(o=s[i]),"function"!=typeof o)throw new Error('Cannot find handler: "'+i+'" on element: ['+a(s)+"].");var c,p=t.capture,v=t.delegate,h=-1!==ee.indexOf(n);c=h?f(n,{el:e,callback:o,capture:p,delegate:v,key:t.key},s):l(n,{el:e,callback:o,capture:p,delegate:v,key:t.key},s),e&&(e.evts=e.evts||new R),e.evts.push(c),0==e.hasAttribute("data-he")&&e.setAttribute("data-he","")}function _(e,t,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)A(e,t[n],r);else A(e,t,r)}function x(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],a=t[o],i=H(o);e.setAttribute(i,a)}}function E(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],a=t[o];-1!==V.indexOf(o)?e.style[o]=isNaN(a)?a:a+"px":e.style[o]=a}}function j(e,t,r,n){for(var o=0,a=t.length;a>o;o++){var i=t[o];Z["set"+i.key](e,i.val,r,n)}}function N(e,t,n){for(var o=0,a=t.length;a>o;o++){var i=t[o],l=r({},{type:i.key},i.val);A(e,l,n)}}function C(e){var t;return t="function"==typeof e?e():e,Boolean(t)}var P=this||{},S=P.document,L=P.Node,T=[],B={},W=function(e,t){if(!Array.isArray(e))return!1;for(var r=0,n=e.length,o=0;n>o;o++)r+=typeof e[o]===t?1:0;return r===n},q=function(e){return e instanceof L},z=function(e){var t=typeof e;return e&&"object"===t||"function"===t},F=function(e){var t=typeof e;return"string"===t||"number"===t},H=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},I=Object.defineProperties,M=Object.defineProperty,R=function(){var e=function(){Array.call(this)};return e.prototype=Object.create(Array.prototype),I(e.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=[],r=0,n=0;n<this.length;n++)e.call(null,this[n])&&t.push(this[n]);for(var o=0;o<t.length;o++){var a=t[o];a.destroy(),this.splice(this.indexOf(a),1),r++}return r==t.length}},removeEvent:{value:function(e,t,r){var n=this,o=[];return this.forEach(function(n){"*"!==e&&n.type!==e||"*"!==t&&n.el!==t||r&&n.capture!==r||o.push(n)}),o.forEach(function(e){e.destroy(),n.splice(n.indexOf(e),1)}),o.length}},removeAll:{value:function(){for(var e=0;e<this.length;e++)this[e].destroy();this.length=0}}}),e}(),$=function(){var e=function(){};return e.prototype=Object.create(Object.prototype),I(e.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=Object.keys(this),r=0,n=0;n<t.length;n++){var o=t[n];e.call(null,this[o],o)&&(r+=delete this[o]?1:0)}return r==t.length}},removeRef:{value:function(e){return this.hasOwnProperty(e)?delete this[e]:!1}},removeAll:{value:function(){for(var e=Object.keys(this),t=0;t<e.length;t++)delete this[e[t]];return t===e.length}}}),e}(),D=function(){function o(e){e.evts.removeAll(),delete e.evts}function a(t){t.evts&&o(t);var r=t.querySelectorAll("[data-he]");e(r,o)}function i(e){var t=e.parentNode;t.refs&&(t.refs.removeAll(),delete t.refs)}function l(e,t){t.refs&&t.refs.remove(function(t,r){return e===t||e.contains(t)})}function f(e,t){var r=e.getAttribute("data-hr");"pr"===r?i(e):"rr"===r&&l(e,t)}function u(t,r){t.refs&&(t.refs.removeAll(),delete t.refs),f(t,r);var n=t.querySelectorAll("[data-hr]");e(n,function(e){f(e,r)})}function c(t,r){e(t,function(e,t){a(e),u(e,r),e.parentNode.removeChild(e)})}var p=function(e){if("undefined"==typeof e)throw new Error("No root provided");I(this,{__owner:{value:e},__data:{value:{}}})};p.prototype=Object.create(Object.prototype);var v=Math.floor(1e5*Math.random());return I(p.prototype,{add:{value:function(e,o,a){var i=o.update?o.update.observeProp:"";if(i&&"__owner"!==i&&F(i)){var l=v++ +"",f=r({__key:l},a),u=n({},o,{obsProp:i},"tplFn,for,root,obsProp,update,alwaysIterate");M(this,i,{get:function(e){return this.__data[e]}.bind(this,i),set:function(e,r,n,o,a){var i=r.obsProp;this.__data[i]=a,r["for"]=a;var l,f=t(e.childNodes,function(e){return e.__key===o}),u=!1;if(f.length){if(l=f[0].previousSibling,null===l){var p=e.childNodes;p.length>f.length&&(l=e.insertBefore(S.createElement("a"),p[0]),u=!0)}c(f,this.__owner)}else l=e.lastChild;var v=s(e,r,this.__owner);q(v)&&y(v,n),w(e,v,this.__owner,n,{startEl:l}),u&&e.removeChild(l)}.bind(this,e,u,f,l)})}}},push:{value:function(e,t){e=""+e;var r=this[e];if(!r||!Array.isArray(r))throw new Error("Value for property ["+e+"] is not an array.");if(Array.isArray(t))for(var n=0;n<t.length;n++)r.push(t[n]);else r.push(t);return this[e]=r,r.length}}}),p}(),V=["width","height","maxWidth","minWidth","maxHeight","minHeight"];!["","Top","Right","Bottom","Left"].forEach(function(e){V.push("padding"+e),V.push("margin"+e)});var Z={setevents:_,setattrs:x,setstyle:E,setchildren:w,setitems:w},G=V,J=["color","backgroundColor","background","display","position","border","transform","opacity","fontSize"],K=["defaults"],Q=["style","children","items","attrs","events"],U=["click","mousedown","mouseup","mouseover","mouseout","mouseenter","mouseleave","mousemove"],X=["dragstart","dragend","drag","dragover","dragenter","dragleave","drop"],Y=["blur","focus"],ee=["keydown","keypress","keyup"],te=["change","input","submit"],re=["touchstart","touchmove","touchend"],ne=["wheel","scroll"],oe=U.concat(X,Y,ee,te,re,ne),ae=["created","appended"],ie=["className","cls"],le=["xtraCls","xCls"],fe=["text","textContent"],ue=["parent"],se=G.concat(J,K,Q,oe,ae,ie,le,fe,ue),ce=G.length,pe=ce+J.length,ve=pe+K.length,he=ve+Q.length,de=he+oe.length,ye=de+ae.length,ge=ye+ie.length,me=ge+le.length,be=me+fe.length,ke=function(e,t,n,o){if(t=t||B,t.hasOwnProperty("if")&&!C(t["if"]))return null;var a=S.createElement(e);n=n||a;var i,l,f,u,s,c,p,v=Object.keys(t);t.hasOwnProperty("hide")&&C(t.hide)&&(p=!0);for(var h=0,d=v.length;d>h;h++){var y=v[h],g=t[y],m=se.indexOf(y);-1==m?a[y]=g:ce>m?a.style[y]=isNaN(g)?g:g+"px":pe>m?a.style[y]=g:ve>m?r(c=c||{},g):he>m?(i=i||[]).push({key:y,val:g}):de>m?(l=l||[]).push({key:y,val:g}):ye>m?(f=f||{})[y]=g:ge>m?u=(u||"")+" "+g:me>m?u=(u||"")+" "+g:be>m?a.appendChild(S.createTextNode(g)):s=g}return i&&j(a,i,n,c),u&&(a.className+=(" "+u).trim()),l&&N(a,l,n),f&&"function"==typeof f.created&&f.created.call(a),s&&q(s)&&a===n&&(s.appendChild(a),f&&"function"==typeof f.appended&&f.appended.call(a,s)),p&&(a.style.display="none"),a},Oe={};return I(Oe,{createElement:{value:function(e,t){return ke(e,t)}},setWindow:{value:function(e){P=e,S=P.document,L=P.Node}}}),Oe});