!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define("Dominic",r):e.Dominic=r()}(this,function(){"use strict";function e(e){var r="undefined"==typeof e?"undefined":he(e);return"string"===r||"number"===r}function r(e){return"function"==typeof e}function t(e,r){if(!de(e))return!1;for(var t=e.length,n=0;t>n;n++)if(he(e[n])!==r)return!1;return!0}function n(e){return e instanceof Node}function o(e){e=e||[];var r=arguments.length;if(2>r)return e;for(var t=e.length,n=1;r>n;n++)for(var o=arguments[n],i=0;i<o.length;i++)e[t++]=o[i];return e}function i(e,r,t){for(var n in e)le(e,n)&&r.call(t,e[n],n)}function a(e,r,t){if(!e||!e.length)return!1;for(var n=e.length,o=0;n>o;o++)if(r.call(t,e[o],o,e))return!0;return!1}function f(e){return e?e[e.length-1]:null}function u(e,r,t){for(var n=null,o=e.childNodes,i=o.length,a=0;i>a;a++){var f=o[a];if(n=!hasOwnProperty.call(f,r)||"undefined"!=typeof t&&f[r]!==t?u(f,r,t):f)return n}return n}function l(e,r,t){for(var n=e.childNodes,o=n.length,i=0;o>i;i++){var a=n[i];if(le(a,r)&&("undefined"==typeof t||a[r]===t))return a}return null}function s(e,r,t){for(var n=e.childNodes,o=n.length,i=o-1;i>-1;i++){var a=n[i];if(le(a,r)&&("undefined"==typeof t||a[r]===t))return a}return null}function c(e,r,t,n){for(var o=e.childNodes,i=o.length,a=-1,f=0;i>f;f++){var u=o[f];if(-1===a&&(!le(u,t)||"undefined"!=typeof n&&u[t]!==n||-1===a&&(a=f)),-1!==a&&f-a===r)return u}return null}function v(e,r,t){for(var n=[],o=e.childNodes,i=o.length,a=0,f=0;i>f;f++){var u=o[f];!le(u,r)||"undefined"!=typeof t&&u[r]!==t||(n[a++]=u)}return n}function p(e,r,t){for(var n=[],i=e.childNodes,a=i.length,f=0;a>f;f++){var u=i[f];!le(u,r)||"undefined"!=typeof t&&u[r]!==t||(n[n.length]=u),o(n,p(u,r,t))}return n}function h(e,r){if(r)for(var t=Object.keys(r),n=t.length,i=[],a=e.childNodes,f=a.length,u=0,l=0;f>l;l++){for(var s=a[l],c=0;n>c;c++){var v=t[c];if(le(s,v)&&("undefined"==typeof value||s[v]===value)){i[u++]=s;break}}o(i,h(s,r))}}function d(e){return!!("function"==typeof e?e():e)}function y(e){return e.replace(ye,"-$1").toLowerCase()}function g(e){var r=e.id?"#"+e.id:"",t=e.classList.toString(),n=t?t.split(" "):ge,o=e.localName+r+(n.length?"."+n.join("."):"");return o}function m(e,r){return _e.call(e,r)}function _(e,r,t){for(;r&&r!==e;){if(m(r,t))return r;r=r.parentNode}return null}function b(){}function w(e,r){function t(e){if("string"==typeof f){if(o===e.target)return;var t=_(o,e.target,f);if(!t)return;"function"==typeof i&&i.call(r,e,t,f)}else"function"==typeof i&&i.call(r,e)}var n=e.type,o=e.el,i=e.callback,a=e.capture,f=e.delegate;return t.destroy=function(){return o.removeEventListener(n,t,a)},o.addEventListener(n,t,a),t}function E(e,r){function t(e){if("string"==typeof f){if(o===e.target)return;var t=_(o,e.target,f);if(!t)return;if(u&&-1===u.indexOf(e.keyCode))return;"function"==typeof i&&i.call(r,e,t,f)}else{if(u&&-1===u.indexOf(e.keyCode))return;"function"==typeof i&&i.call(r,e)}}var n=e.type,o=e.el,i=e.callback,a=e.capture,f=e.delegate,u=e.keys;return t.destroy=function(){return o.removeEventListener(n,t,a)},o.addEventListener(n,t,a),t}function N(e,r,n){var o=r.type;if(!o)throw new Error("No event type specified");var i,a=r.handler,f="undefined"==typeof a?"undefined":he(a);n=n||e;var u="root"===r.scope?n:le(r,"scope")?r.scope:e;if("function"===f?i=a:"string"===f&&(i=u[a]),"function"!=typeof i)throw new Error('Cannot find handler: "'+a+'" on element: ['+g(u)+"].");var l,s=!!r.capture,c=r.delegate,v=-1!==be.indexOf(o),p=-1!==we.indexOf(o);if(v){var h=null;le(r,"key")&&("number"==typeof r.key?h=[r.key]:t(r.key,"number")&&(h=r.key)),l=E({type:o,el:e,callback:i,capture:s,delegate:c,keys:h},u)}else p&&c&&(s=!0),l=w({type:o,el:e,callback:i,capture:s,delegate:c},u);le(e,"evts")||(e.evts=new b),e.evts.push(l),e.hse=!0}function k(e){e=e||{};for(var r=1;r<arguments.length;r++){var t=arguments[r];if(t)for(var n in t)le(t,n)&&(e[n]=t[n])}return e}function x(e){e=e||{};var r=arguments.length;if(3>r)return e;var t=arguments[r-1];if("string"!=typeof t)return e;var n=t.split(",");if(!n.length)return e;for(var o=1;r-1>o;o++){var i=arguments[o];if(i)for(var a in i)if(le(i,a)){if(-1===n.indexOf(a))continue;var f=i[a];e[a]=f}}return e}function O(e){e=e||{};for(var r=1;r<arguments.length;r++){var t=arguments[r];if(t)for(var n in t)if(le(t,n)){var o=t[n];if(Array.isArray(e))for(var i=0;i<e.length;i++){var a=e[i];le(a,n)||(a[n]=o)}else le(e,n)||(e[n]=o)}}return e}function K(e){e.evts.removeAll(),delete e.evts}function S(e){le(e,"evts")&&K(e);var r=p(e,"hse",!0);r.forEach(K)}function j(e){var r=le(e,"refScope")&&"parent"===e.refScope?e.parentNode:e.root;r.refs.removeRef(e.ref)}function A(e,r){le(e,"refs")&&(e.refs.removeAll(),delete e.refs),le(e,"ref")&&j(e,r);var t=p(e,"hsr",!0);t.forEach(j)}function C(e,r){e.forEach(function(e,r){e.nodeType===Node.ELEMENT_NODE&&(A(e),S(e)),e.parentNode.removeChild(e)})}function L(e){return this.__data[e]}function M(e,r){var t=this.__tpl[e],n=this.__owner;this.__data[e]=r;for(var o=0,i=t.length;i>o;o++){var a,u=t[o],l=u.parent,s=u.groupKey,c=v(l,"groupKey",s),n=this.__owner;u["for"]=r,c.length&&(a=f(c).nextSibling),C(c),Q(l,u,s,n,a)}}function P(e,r,t,n){return le(n,"observe")||(n.observe=new ke(n)),n.observe.add(e,r,t,n),n.observe}function q(){}function D(r,t,n){var o=t.ref;if(e(o)){var i=t.refScope,a="parent"===i?r:n;le(a,"refs")||(a.refs=new q),a.refs[o]=t,t.hsr=!0}}function T(e,r,t){t?e.insertBefore(r,t):e.appendChild(r)}function V(e){var r=e.setups;return r?r.__configs.defaults:null}function B(e){var r=e.setups;return r?le(r,"items")?r.items:le(r,"children")?r.children:null:null}function R(e,r){var t=e.setups,n=t.__configs,o=t.__events,i=o.length,a=e.style;for(var f in r)if(le(r,f)){var u=r[f],l=We.indexOf(f);if(-1==l)e[f]=u;else if(Ze>l)a[f]=isNaN(u)?u:u+"px";else if($e>l)a[f]=u;else if(Ge>l)le(n,"defaults")||ie(n,"defaults",{value:pe()}),k(n.defaults,u);else if(Je>l)t[f]=u;else if(Qe>l)t.children=u;else if(Ue>l)u.forEach(function(e){o[i++]=e});else if(Xe>l)o[i++]=k({type:f},u);else if(Ye>l)t[f]=u;else if(rr>l){if(!u)continue;le(t,"cls")||(t.cls=""),t.cls+=u+" "}else tr>l?e.appendChild(document.createTextNode(u)):ie(t,"parent",{value:u})}}function z(e){var r=e.setups;r&&le(r,"attrs")&&i(r.attrs,function(r,t){e.setAttribute(y(t),r)})}function F(e){var r=e.setups;if(r&&le(r,"style")){var t=e.style,n=r.style;for(var o in n)if(le(n,o)){var i=n[o];-1!==xe.indexOf(o)?t[o]=isNaN(i)?i:i+"px":t[o]=i}}}function H(e,r){var t=e.setups;if(t&&le(t,"__events"))for(var n=0,o=t.__events,i=o.length;i>n;n++){var a=o[n];N(e,a,r)}}function I(e){var r=e.setups;r&&le(r,"cls")&&r.cls&&(e.className=r.cls.trim())}function W(e){var r=e.setups;r&&le(r,"created")&&r.created.call(e)}function Z(e){if(le(e,"if")&&!d(e["if"]))return null;var r=le(e,"tag")?e.tag:"div",t=document.createElement(r);return ee(t),R(t,e),t}function $(e,r,t){var n=V(e),o=O(r,n),i=Z(o);return i?(z(i),F(i),H(i,t),I(i),i):null}function G(e,r,t,n){if(null!==r&&"undefined"!=typeof r&&(D(e,r,t),T(e,r,n),!le(r,"d__isCmp"))){var o=B(r);X(r,o,t),W(r)}}function J(r,t,o,i){var a=null;return de(t)||"function"==typeof t?null:(ce(t)?a=le(t,"ctype")?te(t):$(r,t,o):e(t)?a=document.createTextNode(t):n(t)&&(a=t),i&&a&&(a.groupKey=i),a)}function Q(e,r,t,n,o){var i=r["for"];if(i){var a,f,u,l=le(r,"root")?i[r.root]:i,s=r.tplFn;if(l&&"function"==typeof s){var c=n;if(le(r,"scope")){var v=opts.scope;c="root"===v?n:"parent"===v?parent:v}if(de(l))l.forEach(function(r,i){f=s.call(c,r,i),u=J(e,f,n,t),u&&G(e,u,n,o)});else if(ce(l)&&r.alwaysIterate){var p=ae(l);a=p.forEach(function(r,i){return f=s.call(c,l[r],r),u=J(e,f,n,t),u&&G(e,u,n,o),u})}else f=s.call(c,l),de(f)||(f=[f]),a=f.forEach(function(r,i){return u=J(e,r,n,t),u&&G(e,u,n,o),u})}}}function U(r,t,n){var o;if(le(t,"observeProp")){var i=t.observeProp,o=nr++;if(i&&e(i)&&"__owner"!==i){P(r,t,o,n)}}Q(r,t,o,n)}function X(e,r,t){if(r){var o;if(ce(r))return le(r,"ctype")?(o=te(r),void G(e,o,t)):void(le(r,"for")?U(e,r,t):(o=$(e,r,t),G(e,o,t)));if(de(r))return void r.forEach(function(r){X(e,r,t)});if("function"==typeof r){var i=r();return void X(e,i,t)}n(r)?G(e,r,t):G(e,document.createTextNode(r),t)}}function Y(e){var r=e.setups;if(r){var t=B(e);X(e,t,e)}}function ee(e){var r=pe();oe(r,{__configs:{value:pe()},__events:{value:[]}}),e.setups=r}function re(e){var r=le(e,"tag")?e.tag:"div",t=document.createElement(r);ie(t,"d__isCmp",{value:!0}),ee(t),R(t,e),z(t),F(t),H(t,t),I(t),Y(t);var n=t.setups;return le(n,"created")&&n.created.call(t),le(n,"parent")&&(n.parent.appendChild(t),le(n,"appended")&&n.appended.call(t)),t}function te(e){var r=e.ctype,t=Ne.get(r).create(e),n=re(t);return n}function ne(e){return le(e,"ctype")?te(e):re(e)}var oe=Object.defineProperties,ie=Object.defineProperty,ae=Object.keys,fe=Object.prototype,ue=fe.hasOwnProperty,le=function(e,r){return ue.call(e,r)},se=Object.prototype.toString,ce=function(e){return"[object Object]"===se.call(e)},ve=Object.create,pe=function(e){var r=ve(null);for(var t in e)le(e,t)&&(r[t]=e[t]);return r},he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},de=Array.isArray,ye=/([A-Z])/g,ge=[],me=Element.prototype,_e=me.matches||me.matchesSelector||me.msMatchesSelector||me.webkitMatchesSelector||me.mozMatchesSelector||me.oMatchesSelector,be=["keydown","keypress","keyup","input"],we=["blur","focus"];b.__proto__=Array.prototype,b.prototype=Object.create(Array.prototype),oe(b.prototype,{removeAll:{value:function(){for(var e=0;e<this.length;e++)this[e].destroy();this.length=0}}});var Ee=pe(),Ne=pe();oe(Ne,{register:{value:function(e,t){if(le(Ee,e))throw Error("Name already registered");if(!r(t))throw Error("Not valid definitions");return ie(Ee,e,{value:pe({create:t})}),this}},get:{value:function(e){if(!Ee[e])throw Error("No component registered");return Ee[e]}}});var ke=function(e){if(!e)throw new Error("No root provided");oe(this,{__owner:{value:e},__data:{value:pe()},__tpl:{value:pe()}})};oe(ke.prototype,{add:{value:function(e,r,t,n){var o=r.observeProp,r=x(pe({parent:e,groupKey:t}),r,"tplFn,scope,for,root,observeProp,alwaysIterate"),i=r["for"],a=le(this,o);a?this.__tpl[o].push(r):(this.__data[o]=i,this.__tpl[o]=[r],ie(this,o,{get:L.bind(this,o),set:M.bind(this,o)}))}},insert:{value:function(e,r,t){e=""+e;var n=this[e];if(!n||!de(n))throw new Error("Value for property ["+e+"] is not an array.");if(isNaN(r))return void(arguments.length>1&&this.push.apply(this,arguments));var o,i=n.length,a=r;if(!(r>i||0>r)){if(de(t)){o=t;for(var f=0;f<t.length;f++)n.splice(a++,0,t[f])}else o=[t],n.splice(a,0,t);for(var u=this.__tpl[e],f=0,l=u.length;l>f;f++){var s=u[f],v=s.parent,p=s.groupKey,h=c(v,r,"groupKey",p),d=this.__owner;h&&(s["for"]=o,Q(v,s,p,d,h))}}}},remove:{value:function(e,r){e=""+e;var t=this[e];if(!t||!de(t))throw new Error("Value for property ["+e+"] is not an array.");var n=t.length;if(de(r)||(r=[r]),!a(r,isNaN)){var o=this.__tpl[e];r.sort();for(var i=0,f=o.length;f>i;i++)for(var u=o[i],l=u.parent,s=u.groupKey,v=0,p=0,h=r.length;h>p;p++){var d=r[i];if(!(d>n||0>r)){var y=c(l,d,"groupKey",s);y&&(l.removeChild(y),t.splice(d-v++,1))}}}}},push:{value:function(e,r){e=""+e;var t=this[e];if(!t||!de(t))throw new Error("Value for property ["+e+"] is not an array.");var n,o=t.length;if(de(r)){n=r;for(var i=0;i<r.length;i++)t[o++]=r[i]}else n=[r],t[o++]=r;for(var a=this.__tpl[e],i=0,u=a.length;u>i;i++){var l,s=a[i],c=s.parent,p=s.groupKey,h=f(v(c,"groupKey",p)),d=this.__owner;h&&(l=h.nextSibling),s["for"]=n,Q(c,s,p,d,l)}return t.length}},pop:{value:function(e){e=""+e;var r=this[e];if(!r||!de(r))throw new Error("Value for property ["+e+"] is not an array.");for(var t=this.__tpl[e],n=[],o=0,i=0,a=t.length;a>i;i++){var f=t[i],u=f.parent,l=f.groupKey,c=s(u,"groupKey",l);c&&(n[o++]=c)}C(n),r.pop()}},shift:{value:function(e){e=""+e;var r=this[e];if(!r||!de(r))throw new Error("Value for property ["+e+"] is not an array.");for(var t=this.__tpl[e],n=[],o=0,i=0,a=t.length;a>i;i++){var f=t[i],u=f.parent,s=f.groupKey,c=l(u,"groupKey",s);c&&(n[o++]=c)}C(n),r.shift()}},unshift:{value:function(e,r){e=""+e;var t=this[e];if(!t||!de(t))throw new Error("Value for property ["+e+"] is not an array.");var n;t.length;if(de(r)){n=r;for(var o=0;o<r.length;o++)t.unshift(r[o])}else n=[r],t.unshift(r);for(var i=this.__tpl[e],o=0,a=i.length;a>o;o++){var u=i[o],s=u.parent,c=u.groupKey,p=(f(v(s,"groupKey",c)),l(s,"groupKey",c)),h=this.__owner;u["for"]=n,Q(s,u,c,h,p)}return t.length}}}),oe(q.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var r=Object.keys(this),t=0,n=0;n<r.length;n++){var o=r[n];e.call(null,this[o],o)&&(t+=delete this[o]?1:0)}return t==r.length}},removeRef:{value:function(t){if(e(t)){if(t=""+t,le(this,t))return delete this[t]}else if(r(t)){for(var n=Object.keys(this),o=0,i=0;i<n.length;i++){var a=n[i];expression.call(null,this[a],a)&&(o+=delete this[a]?1:0)}return o==n.length}return!1}},removeAll:{value:function(){for(var e=Object.keys(this),r=0;r<e.length;r++)delete this[e[r]];return r===e.length}}});var xe=["width","height","maxWidth","minWidth","maxHeight","minHeight"];!["","Top","Right","Bottom","Left"].forEach(function(e){xe.push("padding"+e),xe.push("margin"+e)});var Oe=xe,Ke=["color","backgroundColor","background","display","position","border","transform","opacity","fontSize"],Se=["defaults"],je=["style","attrs"],Ae=["children","items"],Ce=["events"],Le=(Oe.concat(Ke),["click","mousedown","mouseup","mouseover","mouseout","mouseenter","mouseleave","mousemove"]),Me=["dragstart","dragend","drag","dragover","dragenter","dragleave","drop"],Pe=["blur","focus"],qe=["keydown","keypress","keyup"],De=["change","input","submit"],Te=["touchstart","touchmove","touchend"],Ve=["wheel","scroll"],Be=Le.concat(Me,Pe,qe,De,Te,Ve),Re=["created","appended"],ze=["className","cls"],Fe=["xtraCls","xCls"],He=(Fe.concat(ze),["text","textContent"]),Ie=["parent"],We=Oe.concat(Ke,Se,je,Ae,Ce,Be,Re,ze,Fe,He,Ie),Ze=Oe.length,$e=Ze+Ke.length,Ge=$e+Se.length,Je=Ge+je.length,Qe=Je+Ae.length,Ue=Qe+Ce.length,Xe=Ue+Be.length,Ye=Xe+Re.length,er=Ye+ze.length,rr=er+Fe.length,tr=rr+He.length,nr=Math.floor(1e5*Math.random()),or=pe();return oe(or,{create:{value:ne},query:{value:u},queryDirect:{value:l},queryLastDirect:{value:s},queryAll:{value:p},queryAllDirect:{value:v},queryAllByMultipleKeys:{value:h},attachEvent:{value:N},register:{value:function(e,r){return Ne.register(e,r),this}}}),or});