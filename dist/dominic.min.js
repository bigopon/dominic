!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Dominic=t()}(this,function(){function e(e,t,r){if(e)for(var n=0;n<e.length;n++)t.call(r,e[n],n)}function t(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n=Object.keys(r),o=0;o<n.length;o++)e[n[o]]=r[n[o]]}return e}function r(e){if(e=e||{},arguments.length<2)return e;var t=arguments[arguments.length-1];if("string"!=typeof t)return e;var r=t.split(",");if(!r.length)return e;for(var n=1;n<arguments.length-1;n++){var o=arguments[n];if(o)for(var a=Object.keys(arguments[n]),i=0;i<a.length;i++){var l=a[i];if(-1!==r.indexOf(l)){var f=o[l];e[l]=f}}}return e}function n(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n=Object.keys(arguments[t]),o=0;o<n.length;o++){var a=n[o];if(Array.isArray(e))for(k=0;k<e.length;k++)e[k].hasOwnProperty(a)||(e[k][a]=r[a]);else e.hasOwnProperty(a)||(e[a]=r[a])}}return e}function o(e){var t=e.id?"#"+e.id:"",r=e.classList.toString(),n=r?r.split(" "):_,o=e.localName+t+(n.length?"."+n.join("."):"");return o}function a(e,t,r){for(;t&&t!==e;){if(t.matches(r))return t;t=t.parentNode}return null}function i(e,t,r){t=t||{};var n=t.el||C.documentElement,o=t.callback,i=t.capture||!1,l=t.delegate,f=function(e){var t=e.currentTarget;if("string"==typeof l){if(t===e.target)return;var n=a(t,e.target,l);if(!n)return;"function"==typeof o&&o.call(r,e,n,l)}else"function"==typeof o&&o.call(r,e)};return f.destroy=function(){return this.el=null,n.removeEventListener(e,f,i)},f.el=n,f.type=e,f.capture=i,n.addEventListener(e,f,i),f}function l(e,t,r){t=t||{};var n,o=t.el||C.documentElement,i=t.callback,l=t.capture,f=t.delegate;"number"==typeof t.key?n=[t.key]:S(t.key,"number")&&(n=t.key);var u=function(e){var t=e.currentTarget;if("string"==typeof f){if(t===e.target)return;var o=a(t,e.target,f);if(!o)return;if(n&&-1===n.indexOf(e.keyCode))return;"function"==typeof i&&i.call(r,e,o,f)}else{if(n&&-1===n.indexOf(e.keyCode))return;"function"==typeof i&&i.call(r,e)}};return u.destroy=function(){return this.el=null,o.removeEventListener(e,u,l)},u.el=o,u.type=e,u.capture=l,o.addEventListener(e,u,l),u}function f(e,t,r){var n=t.ref;if(B(n)){var o=t.refScope,a="parent"===o?e:r;a.refs=a.refs||new H,a.refs[n]=t,t.setAttribute("data-hr","parent"===o?"pr":"rr")}}function u(e,t,r){var n=t["for"];if(!n)return null;var o,a=t.root||"",i=a?n[a]:n,l=t.tplFn;if(i&&"function"==typeof l){var f=t.scope,u="root"===f?r:"parent"===f?e:f;if(Array.isArray(i))o=i.map(l,u);else if(T(i)&&t.alwaysIterate){var s=Object.keys(i);o=s.map(function(e){return l.call(u,i[e],e)})}else o=l.call(u,i)}return o}function s(e,t,r,n){return r.observe=r.observe||new I(r),r.observe.add(e,t,n),r.observe}function c(e,t,r,n,o){var a=t.fn;if("function"==typeof a){var i=t.scope,l="root"===i?r:"parent"===i?e:i,f=a.call(l);g(e,f,r,n,o)}}function p(e,t,r,n,o){if(T(t.update)){var a=t.update.observeProp;if(B(a)){var i=s(e,t,r,n);i[a]=t["for"]}}else{var l=u(e,t,r);g(e,l,r,n,o)}}function v(e,t,r,o,a){for(var i=0;i<t.length;i++){var l=t[i];o&&n(l,o),g(e,l,r,o,a)}}function h(e,t,r,o,a){var i=""+(t.tag||"div");delete t.tag,o&&n(t,o);var l=ye(i,t,r);g(e,l,r,o,a)}function d(e,t){for(;e;)return e.getAttribute("data-tk")!==t?e:d(e.nextSibling,t);return null}function y(e,t,r){var n=r.startEl.nextSibling;if(n){var o=t.getAttribute("data-tk"),a=d(n,o);a?e.insertBefore(t,a):e.appendChild(t)}else e.appendChild(t)}function g(e,t,r,o,a){"use strict";if(t){if(B(t)){var i=C.createTextNode(t);return void(a&&a.startEl?(y(e,i,a),a.startEl=i):e.appendChild(i))}if(L(t))a&&a.startEl?(y(e,t,a),a.startEl=t):e.appendChild(t),f(e,t,r);else if("function"==typeof t){var l=t();o&&n(l,o),g(e,l,r,o,a)}else Array.isArray(t)?v.apply(null,arguments):t.hasOwnProperty("for")?p.apply(null,arguments):t.hasOwnProperty("fn")?c.apply(null,arguments):h.apply(null,arguments)}}function m(e,t,r){var n=t.type;if(!n)throw new Error("No event type specified");var a,f=t.handler,u=typeof f;r=r||e;var s="root"===t.scope?r:t.scope?t.scope:e;if("function"===u?a=f:"string"===u&&(a=s[f]),"function"!=typeof a)throw new Error('Cannot find handler: "'+f+'" on element: ['+o(s)+"].");var c,p=t.capture,v=t.delegate,h=-1!==Q.indexOf(n);c=h?l(n,{el:e,callback:a,capture:p,delegate:v,key:t.key},s):i(n,{el:e,callback:a,capture:p,delegate:v,key:t.key},s),e&&(e.evts=e.evts||new F),e.evts.push(c),0==e.hasAttribute("data-he")&&e.setAttribute("data-he","")}function b(e,t,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)m(e,t[n],r);else m(e,t,r)}function A(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],a=t[o];e.setAttribute(q(o),a)}}function w(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],a=t[o];-1!==M.indexOf(o)?e.style[o]=isNaN(a)?a:a+"px":e.style[o]=a}}function O(e,t,r,n){for(var o=0,a=t.length;a>o;o++){var i=t[o];R["set"+i.key](e,i.val,r,n)}}function E(e,r,n){for(var o=0,a=r.length;a>o;o++){var i=r[o],l=t({},{type:i.key},i.val);m(e,l,n)}}function x(e){var t;return t="function"==typeof e?e():e,Boolean(t)}var j=this||{},C=j.document,N=j.Node,_=[],P={},S=function(e,t){if(!Array.isArray(e))return!1;for(var r=0,n=e.length,o=0;n>o;o++)r+=typeof e[o]===t?1:0;return r===n},L=function(e){return e instanceof N},T=function(e){var t=typeof e;return e&&"object"===t||"function"===t},B=function(e){var t=typeof e;return"string"===t||"number"===t},q=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},W=Object.defineProperties,z=Object.defineProperty,F=function(){var e=function(){Array.call(this)};return e.prototype=Object.create(Array.prototype),W(e.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=[],r=0,n=0;n<this.length;n++)e.call(null,this[n])&&t.push(this[n]);for(var o=0;o<t.length;o++){var a=t[o];a.destroy(),this.splice(this.indexOf(a),1),r++}return r==t.length}},removeEvent:{value:function(e,t,r){var n=this,o=[];return this.forEach(function(n){"*"!==e&&n.type!==e||"*"!==t&&n.el!==t||r&&n.capture!==r||o.push(n)}),o.forEach(function(e){e.destroy(),n.splice(n.indexOf(e),1)}),o.length}},removeAll:{value:function(){for(var e=0;e<this.length;e++)this[e].destroy();this.length=0}}}),e}(),H=function(){var e=function(){};return e.prototype=Object.create(Object.prototype),W(e.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=Object.keys(this),r=0,n=0;n<t.length;n++){var o=t[n];e.call(null,this[o],o)&&(r+=delete this[o]?1:0)}return r==t.length}},removeRef:{value:function(e){return this.hasOwnProperty(e)?delete this[e]:!1}},removeAll:{value:function(){for(var e=Object.keys(this),t=0;t<e.length;t++)delete this[e[t]];return t===e.length}}}),e}(),I=function(){function n(e){e.evts.removeAll(),delete e.evts}function o(t){t.evts&&n(t);var r=t.querySelectorAll("[data-he]");e(r,n)}function a(e){var t=e.parentNode;t.refs&&(t.refs.removeAll(),delete t.refs)}function i(e,t){t.refs&&t.refs.remove(function(t,r){return e===t||e.contains(t)})}function l(e,t){var r=e.getAttribute("data-hr");"pr"===r?a(e):"rr"===r&&i(e,t)}function f(t,r){t.refs&&(t.refs.removeAll(),delete t.refs),l(t,r);var n=t.querySelectorAll("[data-hr]");e(n,function(e){l(e,r)})}function s(t,r){e(t,function(e,t){o(e),f(e,r),e.parentNode.removeChild(e)})}var c=function(e){if("undefined"==typeof e)throw new Error("No root provided");W(this,{__owner:{value:e},__data:{value:{}}})};c.prototype=Object.create(Object.prototype);var p=Math.floor(1e5*Math.random());return W(c.prototype,{add:{value:function(e,n,o){var a=n.update?n.update.observeProp:"";if(a&&"__owner"!==a&&B(a)){var i=p++ +"",l=t({attrs:{dataTk:i}},o),f=r({},n,{obsProp:a},"tplFn,for,root,obsProp,update,alwaysIterate");z(this,a,{get:function(e){return this.__data[e]}.bind(this,a),set:function(e,t,r,n,o){var a=t.obsProp;this.__data[a]=o,t["for"]=o;var i,l=e.querySelectorAll('[data-tk="'+n+'"]'),f=!1;if(l.length){if(i=l[0].previousSibling,null===i){var c=e.childNodes;c.length>l.length&&(i=e.insertBefore(C.createElement("a"),c[0]),f=!0)}s(l,this.__owner)}else i=e.lastChild;var p=u(e,t,this.__owner);g(e,p,this.__owner,r,{startEl:i}),f&&e.removeChild(i)}.bind(this,e,f,l,i)})}}},push:{value:function(e,t){e=""+e;var r=this[e];if(!r||!Array.isArray(r))throw new Error("Value for property ["+e+"] is not an array.");if(Array.isArray(t))for(var n=0;n<t.length;n++)r.push(t[n]);else r.push(t);return this[e]=r,r.length}}}),c}(),M=["width","height","maxWidth","minWidth","maxHeight","minHeight"];!["","Top","Right","Bottom","Left"].forEach(function(e){M.push("padding"+e),M.push("margin"+e)});var R={setevents:b,setattrs:A,setstyle:w,setchildren:g,setitems:g},$=M,D=["color","backgroundColor","background","display","position","border","transform","opacity","fontSize"],V=["defaults"],Z=["style","children","items","attrs","events"],G=["click","mousedown","mouseup","mouseover","mouseout","mouseenter","mouseleave","mousemove"],J=["dragstart","dragend","drag","dragover","dragenter","dragleave","drop"],K=["blur","focus"],Q=["keydown","keypress","keyup"],U=["change","input","submit"],X=["touchstart","touchmove","touchend"],Y=["wheel","scroll"],ee=G.concat(J,K,Q,U,X,Y),te=["created","appended"],re=["className","cls"],ne=["xtraCls","xCls"],oe=["text","textContent"],ae=["parent"],ie=$.concat(D,V,Z,ee,te,re,ne,oe,ae),le=$.length,fe=le+D.length,ue=fe+V.length,se=ue+Z.length,ce=se+ee.length,pe=ce+te.length,ve=pe+re.length,he=ve+ne.length,de=he+oe.length,ye=function(e,r,n,o){if(r=r||P,r.hasOwnProperty("if")&&!x(r["if"]))return null;var a=C.createElement(e);n=n||a;var i,l,f,u,s,c,p,v=Object.keys(r);r.hasOwnProperty("hide")&&x(r.hide)&&(p=!0);for(var h=0,d=v.length;d>h;h++){var y=v[h],g=r[y],m=ie.indexOf(y);-1==m?a[y]=g:le>m?a.style[y]=isNaN(g)?g:g+"px":fe>m?a.style[y]=g:ue>m?t(c=c||{},g):se>m?(i=i||[]).push({key:y,val:g}):ce>m?(l=l||[]).push({key:y,val:g}):pe>m?(f=f||{})[y]=g:ve>m?u=(u||"")+" "+g:he>m?u=(u||"")+" "+g:de>m?a.appendChild(C.createTextNode(g)):s=g}return i&&O(a,i,n,c),u&&(a.className+=(" "+u).trim()),l&&E(a,l,n),f&&"function"==typeof f.created&&f.created.call(a),s&&L(s)&&a===n&&(s.appendChild(a),f&&"function"==typeof f.appended&&f.appended.call(a,s)),p&&(a.style.display="none"),a},ge={createElement:function(e,t){return ye(e,t)},setWindow:function(e){j=e,C=j.document,N=j.Node}};return ge});