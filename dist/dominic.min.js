!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Dominic=t()}(this,function(){var e=this||{},t=e.document,r=e.Node,n=[],o={},a=function(e){return e instanceof r},i=function(e){var t=typeof e;return e&&"object"===t||"function"===t},s=function(e){var t=typeof e;return"string"===t||"number"===t},f=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},u=function(e){e=e||{};for(var t=1;t<arguments.length;t++)for(var r=arguments[t],n=Object.keys(arguments[t]),o=0;o<n.length;o++)e[n[o]]=r[n[o]];return e},l=function(e){if(e=e||{},arguments.length<2)return e;var t=arguments[arguments.length-1];if("string"!=typeof t)return e;var r=t.split(",");if(!r.length)return e;for(var n=1;n<arguments.length-1;n++)for(var o=arguments[n],a=Object.keys(arguments[n]),i=0;i<a.length;i++){var s=a[i];if(-1!==r.indexOf(s)){var f=o[s];e[s]=f}}return e},c=function(e){e=e||{};for(var t=1;t<arguments.length;t++)for(var r=arguments[t],n=Object.keys(arguments[t]),o=0;o<n.length;o++){var a=n[o];if(Array.isArray(e))for(k=0;k<e.length;k++)e[k].hasOwnProperty(a)||(e[k][a]=r[a]);else e.hasOwnProperty(a)||(e[a]=r[a])}return e},p=function(e){var t=e.id?"#"+e.id:"",r=e.classList.toString(),o=r?r.split(" "):n,a=e.localName+t+(o.length?"."+o.join("."):"");return a},h=function(e,t,r){for(;t!==e;){if(t.matches(r))return t;t=t.parentNode}return null},v=function(e,r,n){r=r||{};var o=r.el||t.documentElement,a=r.callback,i=r.capture||!1,s=r.delegate,f=function(e){if("string"==typeof s){if(o===e.target)return;var t=h(o,e.target,s);if(!t)return;"function"==typeof a&&a.call(t,e)}else"function"==typeof a&&a.call(n,e)};return f.destroy=function(){return this.el=null,o.removeEventListener(e,f,i)},f.el=o,f.type=e,f.capture=i,o.addEventListener(e,f,i),f},d=Object.defineProperties,y=Object.defineProperty,g=function(){var e=function(){Array.call(this)};return e.prototype=Object.create(Array.prototype),d(e.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=[],r=0,n=0;n<this.length;n++)e.call(null,this[n])&&t.push(this[n]);for(var o=0;o<t.length;o++){var a=t[o];a.destroy(),this.splice(this.indexOf(a),1),r++}return r==t.length}},removeEvent:{value:function(e,t,r){var n=this,o=[];return this.forEach(function(n){"*"!==e&&n.type!==e||"*"!==t&&n.el!==t||r&&n.capture!==r||o.push(n)}),o.forEach(function(e){e.destroy(),n.splice(n.indexOf(e),1)}),o.length}},removeAll:{value:function(){for(var e=0;e<this.length;e++)this[e].destroy();this.length=0}}}),e}(),m=function(){var e=function(){};return e.prototype=Object.create(Object.prototype),d(e.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=Object.keys(this),r=0,n=0;n<t.length;n++){var o=t[n];e.call(null,this[o],o)&&(r+=delete this[o]?1:0)}return r==t.length}},removeRef:{value:function(e){return this.hasOwnProperty(e)?delete this[e]:!1}},removeAll:{value:function(){for(var e=Object.keys(this),t=0;t<e.length;t++)delete this[e[t]];return t===e.length}}}),e}(),w=function(){var e=function(e){if("undefined"==typeof e)throw new Error("No root provided");d(this,{__owner:{value:e},__data:{value:{},writable:!0}})};return e.prototype=Object.create(Object.prototype),d(e.prototype,{add:{value:function(e,t){var r=t.update?t.update.observeProp:"";if(!r||"__owner"===r||!s(r))return!1;var n=l({},t,{appendTo:e,obsProp:r},"tplFn,for,root,appendTo,obsProp,update"),o=Math.random().toString();y(this,r,{get:function(){return this.__data[o+r]},set:function(t){for(this.__data[o+r]=t,n["for"]=t;e.firstChild;){var a=e.removeChild(e.firstChild);this.__owner.evts&&this.__owner.evts.remove(function(e){return a.contains(e.el)}),this.__owner.refs&&this.__owner.refs.remove(function(e,t){return a===e||a.contains(e)})}var i=O(e,n,this.__owner);j(e,i,this.__owner)}})}},push:{value:function(e,t){e=""+e;var r=this[e];if(!r||!Array.isArray(r))throw new Error("Value for property ["+e+"] is not an array.");if(Array.isArray(t))for(var n=0;n<t.length;n++)r.push(t[n]);else r.push(t);return this[e]=r,r.length}}}),e}(),b=function(e,t,r){var n=t.ref;if(s(n)){var o=t.refScope,a="parent"===o?e:r;a.refs=a.refs||new m,a.refs[n]=t}},O=function(e,t,r){var n=t["for"];if(!n)return null;var o,a=t.root||"",i=a?n[a]:n,s=t.tplFn;if(i&&"function"==typeof s){var f=t.scope,u="root"===f?r:"parent"===f?e:f;o=Array.isArray(i)?i.map(s,u):s.call(u,i)}return o},_=function(e,t,r){r.observe=r.observe||new w(r),r.observe.add(e,t)},j=function(e,t,r,n){"use strict";if(i(t))if(a(t))e.appendChild(t),b(e,t,r);else if("function"==typeof t){var o=t();n&&c(o,n),j(e,o,r,n)}else if(Array.isArray(t))for(var s=0;s<t.length;s++){var f=t[s];n&&c(f,n),j(e,f,r,n)}else if(t.hasOwnProperty("for")){var u=O(e,t,r);j(e,u,r,n),i(t.update)&&_(e,t,r)}else if(t.hasOwnProperty("fn")){var l=t.fn;if("function"==typeof l){var p=t.scope,h="root"===p?r:"parent"===p?e:p,v=l.call(h);j(e,v,r,n)}}else{var d=t.tag||"div";if(d&&"string"==typeof d){delete t.tag,n&&c(t,n);var y=ae(d,t,r);j(e,y,r,n)}}},A=function(e,t,r){var n=t.type;if(!n)throw new Error("No event type specified");var o,a=t.handler,i=typeof a;r=r||e;var s="root"===t.scope?r:t.scope?t.scope:e;if("function"===i?o=a:"string"===i&&(o=s[a]),"function"!=typeof o)throw new Error('Cannot find handler: "'+a+'" on element: ['+p(s)+"].");var f=t.capture,u=t.delegate,l=v(n,{el:e,callback:o,capture:f,delegate:u},s);r.evts=r.evts||new g,r.evts.push(l)},N=function(e,t,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)A(e,t[n],r);else A(e,t,r)},x=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],a=t[o];e.setAttribute(f(o),a)}},E=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],a=t[o];e.style[o]=isNaN(a)?a:a+"px"}},P={setevents:N,setattrs:x,setstyle:E,setchildren:j,setitems:j},C=function(e,t){for(var r=0,n=t.length;n>r;r++)e.className=(e.className+t[r]).trim()},L=function(e,t,r,n){for(var o=0,a=t.length;a>o;o++){var i=t[o];P["set"+i.key](e,i.val,r,n)}},S=function(e,t,r){for(var n=0,o=t.length;o>n;n++){var a=t[n],i=u({},{type:a.key},a.val);A(e,i,r)}},T=function(e){var t;return t="function"==typeof e?e():e,Boolean(t)},F=["width","height","maxWidth","maxHeight","padding","margin"],W=["color","backgroundColor","background","display","position","opacity"],$=["defaults"],z=["style","children","items","attrs","events"],B=["click","mousedown","mouseup","mouseover","mouseout","mouseenter","mouseleave","mousemove"],D=["dragstart","dragend","drag","dragover","dragenter","dragout","drop"],H=["blur","focus"],M=["keydown","keypress","keyup"],R=["change","input","submit"],V=["touchstart","touchmove","touchend"],Z=["wheel","scroll"],q=B.concat(D,H,M,R,V,Z),G=["created","appended"],I=["className","cls"],J=["text","textContent"],K=["parent"],Q=F.concat(W,$,z,q,G,I,J,K),U=F.length,X=U+W.length,Y=X+$.length,ee=Y+z.length,te=ee+q.length,re=te+G.length,ne=re+I.length,oe=ne+J.length,ae=function(e,r,n,i){if(r=r||o,r.hasOwnProperty("if")&&!T(r["if"]))return null;var s=t.createElement(e);n=n||s;var f,l,c,p,h,v,d,y=Object.keys(r);r.hasOwnProperty("hide")&&T(r.hide)&&(delete r.hide,d=!0);for(var g=0,m=y.length;m>g;g++){var w=y[g],b=r[w],O=Q.indexOf(w);-1==O?s[w]=b:U>O?s.style[w]=isNaN(b)?b:b+"px":X>O?s.style[w]=b:Y>O?u(v=v||{},b):ee>O?(f=f||[]).push({key:w,val:b}):te>O?(l=l||[]).push({key:w,val:b}):re>O?(c=c||{})[w]=b:ne>O?(p=p||[]).push(b):oe>O?s.appendChild(t.createTextNode(b)):h=b}return f&&L(s,f,n,v),p&&C(s,p),l&&S(s,l,n),c&&"function"==typeof c.created&&c.created.call(s),h&&a(h)&&s===n&&(h.appendChild(s),c&&"function"==typeof c.appended&&c.appended.call(s,h)),d&&(s.style.display="none"),s},ie={createElement:function(e,t){return ae(e,t)},setWindow:function(n){e=n,t=e.document,r=e.Node}};return ie});