!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Dominic=t()}(this,function(){function e(e,t,r){t=t||{};var n=t.el||f.documentElement,o=t.callback,a=t.capture||!1,i=t.delegate,u=function(e){var t=e.currentTarget;if("string"==typeof i){if(t===e.target)return;var n=w(t,e.target,i);if(!n)return;"function"==typeof o&&o.call(r,e,n,i)}else"function"==typeof o&&o.call(r,e)};return u.destroy=function(){return this.el=null,n.removeEventListener(e,u,a)},u.el=n,u.type=e,u.capture=a,n.addEventListener(e,u,a),u}function t(e,t,r){t=t||{};var n,o=t.el||f.documentElement,a=t.callback,i=t.capture,u=t.delegate;"number"==typeof t.key?n=[t.key]:c(t.key,"number")&&(n=t.key);var l=function(e){var t=e.currentTarget;if("string"==typeof u){if(t===e.target)return;var o=w(t,e.target,u);if(!o)return;if(n&&-1===n.indexOf(e.keyCode))return;"function"==typeof a&&a.call(r,e,o,u)}else{if(n&&-1===n.indexOf(e.keyCode))return;"function"==typeof a&&a.call(r,e)}};return l.destroy=function(){return this.el=null,o.removeEventListener(e,l,i)},l.el=o,l.type=e,l.capture=i,o.addEventListener(e,l,i),l}function r(e,t,r,n){var o=t.fn;if("function"==typeof o){var a=t.scope,i="root"===a?r:"parent"===a?e:a,f=o.call(i);P(e,f,r,n)}}function n(e,t,r,n){if(h(t.update)){var o=t.update.observeProp;if(v(o)){var a=N(e,t,r,n);a[o]=t["for"]}}else{var i=C(e,t,r);P(e,i,r,n)}}function o(e,t,r,n){for(var o=0;o<t.length;o++){var a=t[o];n&&m(a,n),P(e,a,r,n)}}function a(e,t,r,n){var o=""+(t.tag||"div");delete t.tag,n&&m(t,n);var a=he(o,t,r);P(e,a,r,n)}var i=this||{},f=i.document,u=i.Node,l=[],s={},c=function(e,t){if(!Array.isArray(e))return!1;for(var r=0,n=e.length,o=0;n>o;o++)r+=typeof e[o]===t?1:0;return r===n},p=function(e){return e instanceof u},h=function(e){var t=typeof e;return e&&"object"===t||"function"===t},v=function(e){var t=typeof e;return"string"===t||"number"===t},d=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},y=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n=Object.keys(r),o=0;o<n.length;o++)e[n[o]]=r[n[o]]}return e},g=function(e){if(e=e||{},arguments.length<2)return e;var t=arguments[arguments.length-1];if("string"!=typeof t)return e;var r=t.split(",");if(!r.length)return e;for(var n=1;n<arguments.length-1;n++){var o=arguments[n];if(o)for(var a=Object.keys(arguments[n]),i=0;i<a.length;i++){var f=a[i];if(-1!==r.indexOf(f)){var u=o[f];e[f]=u}}}return e},m=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n=Object.keys(arguments[t]),o=0;o<n.length;o++){var a=n[o];if(Array.isArray(e))for(k=0;k<e.length;k++)e[k].hasOwnProperty(a)||(e[k][a]=r[a]);else e.hasOwnProperty(a)||(e[a]=r[a])}}return e},b=function(e){var t=e.id?"#"+e.id:"",r=e.classList.toString(),n=r?r.split(" "):l,o=e.localName+t+(n.length?"."+n.join("."):"");return o},w=function(e,t,r){for(;t&&t!==e;){if(t.matches(r))return t;t=t.parentNode}return null},O=Object.defineProperties,x=Object.defineProperty,A=(Array.prototype.indexOf,function(){var e=function(){Array.call(this)};return e.prototype=Object.create(Array.prototype),O(e.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=[],r=0,n=0;n<this.length;n++)e.call(null,this[n])&&t.push(this[n]);for(var o=0;o<t.length;o++){var a=t[o];a.destroy(),this.splice(this.indexOf(a),1),r++}return r==t.length}},removeEvent:{value:function(e,t,r){var n=this,o=[];return this.forEach(function(n){"*"!==e&&n.type!==e||"*"!==t&&n.el!==t||r&&n.capture!==r||o.push(n)}),o.forEach(function(e){e.destroy(),n.splice(n.indexOf(e),1)}),o.length}},removeAll:{value:function(){for(var e=0;e<this.length;e++)this[e].destroy();this.length=0}}}),e}()),_=function(){var e=function(){};return e.prototype=Object.create(Object.prototype),O(e.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=Object.keys(this),r=0,n=0;n<t.length;n++){var o=t[n];e.call(null,this[o],o)&&(r+=delete this[o]?1:0)}return r==t.length}},removeRef:{value:function(e){return this.hasOwnProperty(e)?delete this[e]:!1}},removeAll:{value:function(){for(var e=Object.keys(this),t=0;t<e.length;t++)delete this[e[t]];return t===e.length}}}),e}(),j=function(e,t,r){var n=t.ref;if(v(n)){var o=t.refScope,a="parent"===o?e:r;a.refs=a.refs||new _,a.refs[n]=t,x(t,"__hasReference",{value:!0})}},E=function(){var e=function(e){if("undefined"==typeof e)throw new Error("No root provided");O(this,{__owner:{value:e},__data:{value:{}}})};return e.prototype=Object.create(Object.prototype),O(e.prototype,{add:{value:function(e,t,r){var n=t.update?t.update.observeProp:"";if(n&&"__owner"!==n&&v(n)){var o=Math.random()+"",a=y({specialKey:o},r),i=g({},t,{obsProp:n},"tplFn,for,root,obsProp,update,alwaysIterate");x(this,n,{get:function(){return this.__data[n]},set:function(e,t,r,n,o){var a=t.obsProp;for(this.__data[a]=o,t["for"]=o;e.firstChild;){var i=e.removeChild(e.firstChild);i.evts&&i.evts.removeAll(),i.__hasReference===!0&&this.__owner.refs.remove(function(e,t){return i===e||i.contains(e)})}var f=C(e,t,this.__owner);P(e,f,this.__owner,r)}.bind(this,e,i,a,o)})}}},push:{value:function(e,t){e=""+e;var r=this[e];if(!r||!Array.isArray(r))throw new Error("Value for property ["+e+"] is not an array.");if(Array.isArray(t))for(var n=0;n<t.length;n++)r.push(t[n]);else r.push(t);return this[e]=r,r.length}}}),e}(),C=function(e,t,r){var n=t["for"];if(!n)return null;var o,a=t.root||"",i=a?n[a]:n,f=t.tplFn;if(i&&"function"==typeof f){var u=t.scope,l="root"===u?r:"parent"===u?e:u;if(Array.isArray(i))o=i.map(f,l);else if(h(i)&&t.alwaysIterate){var s=Object.keys(i);o=s.map(function(e){return f.call(l,i[e],e)})}else o=f.call(l,i)}return o},N=function(e,t,r,n){return r.observe=r.observe||new E(r),r.observe.add(e,t,n),r.observe},P=function(e,t,i,u){"use strict";if(t){if(v(t))return void e.appendChild(f.createTextNode(t));if(p(t))e.appendChild(t),j(e,t,i);else if("function"==typeof t){var l=t();u&&m(l,u),P(e,l,i,u)}else Array.isArray(t)?o(e,t,i,u):t.hasOwnProperty("for")?n(e,t,i,u):t.hasOwnProperty("fn")?r(e,t,i,u):a(e,t,i,u)}},L=function(r,n,o){var a=n.type;if(!a)throw new Error("No event type specified");var i,f=n.handler,u=typeof f;o=o||r;var l="root"===n.scope?o:n.scope?n.scope:r;if("function"===u?i=f:"string"===u&&(i=l[f]),"function"!=typeof i)throw new Error('Cannot find handler: "'+f+'" on element: ['+b(l)+"].");var s,c=n.capture,p=n.delegate,h=-1!==q.indexOf(a);s=h?t(a,{el:r,callback:i,capture:c,delegate:p,key:n.key},l):e(a,{el:r,callback:i,capture:c,delegate:p,key:n.key},l),r.evts=r.evts||new A,r.evts.push(s)},T=function(e,t,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)L(e,t[n],r);else L(e,t,r)},W=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],a=t[o];e.setAttribute(d(o),a)}},H=["width","height","maxWidth","minWidth","maxHeight","minHeight"];!["","Top","Right","Bottom","Left"].forEach(function(e){H.push("padding"+e),H.push("margin"+e)});var R=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],a=t[o];-1!==H.indexOf(o)?e.style[o]=isNaN(a)?a:a+"px":e.style[o]=a}},S={setevents:T,setattrs:W,setstyle:R,setchildren:P,setitems:P},z=function(e,t,r,n){for(var o=0,a=t.length;a>o;o++){var i=t[o];S["set"+i.key](e,i.val,r,n)}},B=function(e,t,r){for(var n=0,o=t.length;o>n;n++){var a=t[n],i=y({},{type:a.key},a.val);L(e,i,r)}},F=function(e){var t;return t="function"==typeof e?e():e,Boolean(t)},I=["width","height","minWidth","minHeight","maxWidth","maxHeight","padding","margin"],$=["color","backgroundColor","background","display","position","border","transform","opacity","fontSize"],D=["defaults"],K=["style","children","items","attrs","events"],M=["click","mousedown","mouseup","mouseover","mouseout","mouseenter","mouseleave","mousemove"],V=["dragstart","dragend","drag","dragover","dragenter","dragout","drop"],Z=["blur","focus"],q=["keydown","keypress","keyup"],G=["change","input","submit"],J=["touchstart","touchmove","touchend"],Q=["wheel","scroll"],U=M.concat(V,Z,q,G,J,Q),X=["created","appended"],Y=["className","cls"],ee=["xtraCls","xCls"],te=["text","textContent"],re=["parent"],ne=I.concat($,D,K,U,X,Y,ee,te,re),oe=I.length,ae=oe+$.length,ie=ae+D.length,fe=ie+K.length,ue=fe+U.length,le=ue+X.length,se=le+Y.length,ce=se+ee.length,pe=ce+te.length,he=function(e,t,r,n){if(t=t||s,t.hasOwnProperty("if")&&!F(t["if"]))return null;var o=f.createElement(e);r=r||o;var a,i,u,l,c,h,v,d=Object.keys(t);t.hasOwnProperty("hide")&&F(t.hide)&&(delete t.hide,v=!0);for(var g=0,m=d.length;m>g;g++){var b=d[g],k=t[b],w=ne.indexOf(b);-1==w?o[b]=k:oe>w?o.style[b]=isNaN(k)?k:k+"px":ae>w?o.style[b]=k:ie>w?y(h=h||{},k):fe>w?(a=a||[]).push({key:b,val:k}):ue>w?(i=i||[]).push({key:b,val:k}):le>w?(u=u||{})[b]=k:se>w?l=(l||"")+" "+k:ce>w?l=(l||"")+" "+k:pe>w?o.appendChild(f.createTextNode(k)):c=k}return a&&z(o,a,r,h),l&&(o.className+=(" "+l).trim()),i&&B(o,i,r),u&&"function"==typeof u.created&&u.created.call(o),c&&p(c)&&o===r&&(c.appendChild(o),u&&"function"==typeof u.appended&&u.appended.call(o,c)),v&&(o.style.display="none"),o},ve={createElement:function(e,t){return he(e,t)},setWindow:function(e){i=e,f=i.document,u=i.Node}};return ve});