!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Dominic=t()}(this,function(){function e(e,t,r){t=t||{};var o=t.el||n.documentElement,a=t.callback,i=t.capture||!1,f=t.delegate,u=function(e){var t=e.currentTarget;if("string"==typeof f){if(t===e.target)return;var n=y(t,e.target,f);if(!n)return;"function"==typeof a&&a.call(r,e,n,f)}else"function"==typeof a&&a.call(r,e)};return u.destroy=function(){return this.el=null,o.removeEventListener(e,u,i)},u.el=o,u.type=e,u.capture=i,o.addEventListener(e,u,i),u}function t(e,t,r){t=t||{};var o,a=t.el||n.documentElement,i=t.callback,u=t.capture,s=t.delegate;"number"==typeof t.key?o=[t.key]:f(t.key,"number")&&(o=t.key);var l=function(e){var t=e.currentTarget;if("string"==typeof s){if(t===e.target)return;var n=y(t,e.target,s);if(!n)return;if(o&&-1===o.indexOf(e.keyCode))return;"function"==typeof i&&i.call(r,e,n,s)}else{if(o&&-1===o.indexOf(e.keyCode))return;"function"==typeof i&&i.call(r,e)}};return l.destroy=function(){return this.el=null,a.removeEventListener(e,l,u)},l.el=a,l.type=e,l.capture=u,a.addEventListener(e,l,u),l}var r=this||{},n=r.document,o=r.Node,a=[],i={},f=function(e,t){if(!Array.isArray(e))return!1;for(var r=0,n=e.length,o=0;n>o;o++)r+=typeof e[o]===t?1:0;return r===n},u=function(e){return e instanceof o},s=function(e){var t=typeof e;return e&&"object"===t||"function"===t},l=function(e){var t=typeof e;return"string"===t||"number"===t},c=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},p=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n=Object.keys(r),o=0;o<n.length;o++)e[n[o]]=r[n[o]]}return e},h=function(e){if(e=e||{},arguments.length<2)return e;var t=arguments[arguments.length-1];if("string"!=typeof t)return e;var r=t.split(",");if(!r.length)return e;for(var n=1;n<arguments.length-1;n++){var o=arguments[n];if(o)for(var a=Object.keys(arguments[n]),i=0;i<a.length;i++){var f=a[i];if(-1!==r.indexOf(f)){var u=o[f];e[f]=u}}}return e},v=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n=Object.keys(arguments[t]),o=0;o<n.length;o++){var a=n[o];if(Array.isArray(e))for(k=0;k<e.length;k++)e[k].hasOwnProperty(a)||(e[k][a]=r[a]);else e.hasOwnProperty(a)||(e[a]=r[a])}}return e},d=function(e){var t=e.id?"#"+e.id:"",r=e.classList.toString(),n=r?r.split(" "):a,o=e.localName+t+(n.length?"."+n.join("."):"");return o},y=function(e,t,r){for(;t&&t!==e;){if(t.matches(r))return t;t=t.parentNode}return null},g=Object.defineProperties,m=Object.defineProperty,b=function(){var e=function(){Array.call(this)};return e.prototype=Object.create(Array.prototype),g(e.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=[],r=0,n=0;n<this.length;n++)e.call(null,this[n])&&t.push(this[n]);for(var o=0;o<t.length;o++){var a=t[o];a.destroy(),this.splice(this.indexOf(a),1),r++}return r==t.length}},removeEvent:{value:function(e,t,r){var n=this,o=[];return this.forEach(function(n){"*"!==e&&n.type!==e||"*"!==t&&n.el!==t||r&&n.capture!==r||o.push(n)}),o.forEach(function(e){e.destroy(),n.splice(n.indexOf(e),1)}),o.length}},removeAll:{value:function(){for(var e=0;e<this.length;e++)this[e].destroy();this.length=0}}}),e}(),w=function(){var e=function(){};return e.prototype=Object.create(Object.prototype),g(e.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=Object.keys(this),r=0,n=0;n<t.length;n++){var o=t[n];e.call(null,this[o],o)&&(r+=delete this[o]?1:0)}return r==t.length}},removeRef:{value:function(e){return this.hasOwnProperty(e)?delete this[e]:!1}},removeAll:{value:function(){for(var e=Object.keys(this),t=0;t<e.length;t++)delete this[e[t]];return t===e.length}}}),e}(),O=function(e,t,r){var n=t.ref;if(l(n)){var o=t.refScope,a="parent"===o?e:r;a.refs=a.refs||new w,a.refs[n]=t}},x=function(){var e=function(e){if("undefined"==typeof e)throw new Error("No root provided");g(this,{__owner:{value:e},__data:{value:{}}})};return e.prototype=Object.create(Object.prototype),g(e.prototype,{add:{value:function(e,t,r){var n=t.update?t.update.observeProp:"";if(!n||"__owner"===n||!l(n))return!1;var o=p({},r),a=h({},t,{obsProp:n},"tplFn,for,root,obsProp,update");m(this,n,{get:function(){return this.__data[n]},set:function(e,t,r,n){var o=t.obsProp;for(this.__data[o]=n,t["for"]=n;e.firstChild;){var a=e.removeChild(e.firstChild);this.__owner.evts&&this.__owner.evts.remove(function(e){return a===e.el||a.contains(e.el)}),this.__owner.refs&&this.__owner.refs.remove(function(e,t){return a===e||a.contains(e)})}var i=_(e,t,this.__owner);j(e,i,this.__owner,r)}.bind(this,e,a,o)})}},push:{value:function(e,t){e=""+e;var r=this[e];if(!r||!Array.isArray(r))throw new Error("Value for property ["+e+"] is not an array.");if(Array.isArray(t))for(var n=0;n<t.length;n++)r.push(t[n]);else r.push(t);return this[e]=r,r.length}}}),e}(),_=function(e,t,r){var n=t["for"];if(!n)return null;var o,a=t.root||"",i=a?n[a]:n,f=t.tplFn;if(i&&"function"==typeof f){var u=t.scope,l="root"===u?r:"parent"===u?e:u;if(Array.isArray(i))o=i.map(f,l);else if(s(i)&&t.alwaysIterate){var c=Object.keys(i);o=c.map(function(e){return f.call(l,i[e],e)})}else o=f.call(l,i)}return o},A=function(e,t,r,n){return r.observe=r.observe||new x(r),r.observe.add(e,t,n),r.observe},j=function(e,t,r,o){"use strict";if(t){if(l(t))return void e.appendChild(n.createTextNode(t));if(u(t))e.appendChild(t),O(e,t,r);else if("function"==typeof t){var a=t();o&&v(a,o),j(e,a,r,o)}else if(Array.isArray(t))for(var i=0;i<t.length;i++){var f=t[i];o&&v(f,o),j(e,f,r,o)}else if(t.hasOwnProperty("for"))if(s(t.update)){var c=t.update.observeProp;if(l(c)){var p=A(e,t,r,o);p[c]=t["for"]}}else{var h=_(e,t,r);j(e,h,r,o)}else if(t.hasOwnProperty("fn")){var d=t.fn;if("function"==typeof d){var y=t.scope,g="root"===y?r:"parent"===y?e:y,m=d.call(g);j(e,m,r,o)}}else{var b=t.tag||"div";if(b&&"string"==typeof b){delete t.tag,o&&v(t,o);var k=se(b,t,r);j(e,k,r,o)}}}},E=function(r,n,o){var a=n.type;if(!a)throw new Error("No event type specified");var i,f=n.handler,u=typeof f;o=o||r;var s="root"===n.scope?o:n.scope?n.scope:r;if("function"===u?i=f:"string"===u&&(i=s[f]),"function"!=typeof i)throw new Error('Cannot find handler: "'+f+'" on element: ['+d(s)+"].");var l,c=n.capture,p=n.delegate,h=-1!==V.indexOf(a);l=h?t(a,{el:r,callback:i,capture:c,delegate:p,key:n.key},s):e(a,{el:r,callback:i,capture:c,delegate:p,key:n.key},s),o.evts=o.evts||new b,o.evts.push(l)},C=function(e,t,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)E(e,t[n],r);else E(e,t,r)},N=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],a=t[o];e.setAttribute(c(o),a)}},P=["width","height","maxWidth","minWidth","maxHeight","minHeight"];!["","Top","Right","Bottom","Left"].forEach(function(e){P.push("padding"+e),P.push("margin"+e)});var L=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],a=t[o];-1!==P.indexOf(o)?e.style[o]=isNaN(a)?a:a+"px":e.style[o]=a}},T={setevents:C,setattrs:N,setstyle:L,setchildren:j,setitems:j},W=function(e,t,r,n){for(var o=0,a=t.length;a>o;o++){var i=t[o];T["set"+i.key](e,i.val,r,n)}},H=function(e,t,r){for(var n=0,o=t.length;o>n;n++){var a=t[n],i=p({},{type:a.key},a.val);E(e,i,r)}},S=function(e){var t;return t="function"==typeof e?e():e,Boolean(t)},z=["width","height","minWidth","minHeight","maxWidth","maxHeight","padding","margin"],B=["color","backgroundColor","background","display","position","border","transform","opacity","fontSize"],F=["defaults"],R=["style","children","items","attrs","events"],$=["click","mousedown","mouseup","mouseover","mouseout","mouseenter","mouseleave","mousemove"],D=["dragstart","dragend","drag","dragover","dragenter","dragout","drop"],I=["blur","focus"],V=["keydown","keypress","keyup"],Z=["change","input","submit"],q=["touchstart","touchmove","touchend"],G=["wheel","scroll"],J=$.concat(D,I,V,Z,q,G),K=["created","appended"],M=["className","cls"],Q=["xtraCls","xCls"],U=["text","textContent"],X=["parent"],Y=z.concat(B,F,R,J,K,M,Q,U,X),ee=z.length,te=ee+B.length,re=te+F.length,ne=re+R.length,oe=ne+J.length,ae=oe+K.length,ie=ae+M.length,fe=ie+Q.length,ue=fe+U.length,se=function(e,t,r,o){if(t=t||i,t.hasOwnProperty("if")&&!S(t["if"]))return null;var a=n.createElement(e);r=r||a;var f,s,l,c,h,v,d,y=Object.keys(t);t.hasOwnProperty("hide")&&S(t.hide)&&(delete t.hide,d=!0);for(var g=0,m=y.length;m>g;g++){var b=y[g],k=t[b],w=Y.indexOf(b);-1==w?a[b]=k:ee>w?a.style[b]=isNaN(k)?k:k+"px":te>w?a.style[b]=k:re>w?p(v=v||{},k):ne>w?(f=f||[]).push({key:b,val:k}):oe>w?(s=s||[]).push({key:b,val:k}):ae>w?(l=l||{})[b]=k:ie>w?c=(c||"")+" "+k:fe>w?c=(c||"")+" "+k:ue>w?a.appendChild(n.createTextNode(k)):h=k}return f&&W(a,f,r,v),c&&(a.className+=(" "+c).trim()),s&&H(a,s,r),l&&"function"==typeof l.created&&l.created.call(a),h&&u(h)&&a===r&&(h.appendChild(a),l&&"function"==typeof l.appended&&l.appended.call(a,h)),d&&(a.style.display="none"),a},le={createElement:function(e,t){return se(e,t)},setWindow:function(e){r=e,n=r.document,o=r.Node}};return le});