!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Dominic",t):e.Dominic=t()}(this,function(){"use strict";function e(e){var t="undefined"==typeof e?"undefined":he(e);return"string"===t||"number"===t}function t(e){return"function"==typeof e}function r(e,t){if(!ye(e))return!1;for(var r=e.length,n=0;r>n;n++)if(he(e[n])!==t)return!1;return!0}function n(e){return e instanceof Node}function o(e){return!isNaN(e)&&ge(e)}function i(e){e=e||[];var t=arguments.length;if(2>t)return e;for(var r=e.length,n=1;t>n;n++)for(var o=arguments[n],i=0;i<o.length;i++)e[r++]=o[i];return e}function a(e,t,r){for(var n in e)ce(e,n)&&t.call(r,e[n],n)}function f(e,t,r){if(!e||!e.length)return!1;for(var n=e.length,o=0;n>o;o++)if(t.call(r,e[o],o,e))return!0;return!1}function u(e){return e?e[e.length-1]:null}function l(e,t,r){for(var n=null,o=e.childNodes,i=o.length,a=0;i>a;a++){var f=o[a];if(n=!ce(f,t)||"undefined"!=typeof r&&f[t]!==r?l(f,t,r):f)return n}return n}function c(e,t,r){for(var n=e.childNodes,o=n.length,i=0;o>i;i++){var a=n[i];if(ce(a,t)&&("undefined"==typeof r||a[t]===r))return a}return null}function s(e,t,r){for(var n=e.childNodes,o=n.length,i=o-1;i>-1;i++){var a=n[i];if(ce(a,t)&&("undefined"==typeof r||a[t]===r))return a}return null}function v(e,t,r,n){for(var o=e.childNodes,i=o.length,a=-1,f=0;i>f;f++){var u=o[f];if(-1===a&&(!ce(u,r)||"undefined"!=typeof n&&u[r]!==n||-1===a&&(a=f)),-1!==a&&f-a===t)return u}return null}function p(e,t,r){for(var n=[],o=e.childNodes,i=o.length,a=0,f=0;i>f;f++){var u=o[f];!ce(u,t)||"undefined"!=typeof r&&u[t]!==r||(n[a++]=u)}return n}function d(e,t,r){for(var n=[],o=e.childNodes,a=o.length,f=0;a>f;f++){var u=o[f];!ce(u,t)||"undefined"!=typeof r&&u[t]!==r||(n[n.length]=u),i(n,d(u,t,r))}return n}function h(e,t){if(t)for(var r=Object.keys(t),n=r.length,o=[],a=e.childNodes,f=a.length,u=0,l=0;f>l;l++){for(var c=a[l],s=0;n>s;s++){var v=r[s];if(ce(c,v)&&("undefined"==typeof value||c[v]===value)){o[u++]=c;break}}i(o,h(c,t))}}function y(e){return!!("function"==typeof e?e():e)}function g(e){return e.replace(me,"-$1").toLowerCase()}function m(e){var t=e.id?"#"+e.id:"",r=e.classList.toString(),n=r?r.split(" "):_e,o=e.localName+t+(n.length?"."+n.join("."):"");return o}function _(e,t){return we.call(e,t)}function b(e,t,r){for(;t&&t!==e;){if(_(t,r))return t;t=t.parentNode}return null}function w(){}function N(e,t){function r(e){var n;if("string"==typeof f){if(o===e.target)return;var a=b(o,e.target,f);if(!a)return;if("function"==typeof i){if(l&&(n=l.call(t,e,a,f),!n))return;r.count>-1?(r.count--&&i.call(t,e,a,f),r.count||o.evts.remove(r)):i.call(t,e,a,f)}}else if("function"==typeof i){if(l&&(n=l.call(t,e),!n))return;r.count>-1?(r.count--&&i.call(t,e),r.count||o.evts.remove(r)):i.call(t,e)}}var n=e.type,o=e.el,i=e.callback,a=e.capture,f=e.delegate,u=(e.single,e.count),l=e.validator;return r.count=u,r.destroy=function(){return o.removeEventListener(n,r,a)},o.addEventListener(n,r,a),r}function E(e,t){function r(e){var n;if("string"==typeof f){if(o===e.target)return;var a=b(o,e.target,f);if(!a)return;if(u&&-1===u.indexOf(e.keyCode))return;if("function"==typeof i){if(c&&(n=c.call(t,e,a,f),!n))return;r.count>-1?(r.count--&&i.call(t,e,a,f),r.count||o.evts.remove(r)):i.call(t,e,a,f)}}else{if(u&&-1===u.indexOf(e.keyCode))return;if("function"==typeof i){if(c&&(n=c.call(t,e),!n))return;r.count>-1?(r.count--&&i.call(t,e),r.count||o.evts.remove(r)):i.call(t,e)}}}var n=e.type,o=e.el,i=e.callback,a=e.capture,f=e.delegate,u=e.keys,l=e.count,c=e.validator;return r.count=l,r.destroy=function(){return o.removeEventListener(n,r,a)},o.addEventListener(n,r,a),r}function k(e,t,n){var i=t.type;if(!i)throw new Error("No event type specified");var a,f=t.handler,u="undefined"==typeof f?"undefined":he(f);n=n||e;var l="root"===t.scope?n:ce(t,"scope")?t.scope:e;if("function"===u?a=f:"string"===u&&(a=l[f]),"function"!=typeof a)throw new Error('Cannot find handler: "'+f+'" on element: ['+m(l)+"].");var c,s=!!t.capture,v=t.delegate,p=-1!==Ne.indexOf(i),d=-1!==Ee.indexOf(i),h=ce(t,"count")&&o(t.count)?t.count:-1,y=t.single===!0,g=he(t.validator),_=null;if("string"===g?_=l[t.validator]:"function"===g&&(_=t.validator),p){var b=null;ce(t,"key")&&("number"==typeof t.key?b=[t.key]:r(t.key,"number")&&(b=t.key)),c=E({type:i,el:e,callback:a,capture:s,delegate:v,keys:b,single:y,count:h,validator:_},l)}else d&&v&&(s=!0),c=N({type:i,el:e,callback:a,capture:s,delegate:v,single:y,count:h,validator:_},l);ce(e,"evts")||(e.evts=new w),e.evts.push(c),e.hse=!0}function x(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n in r)ce(r,n)&&(e[n]=r[n])}return e}function O(e){e=e||{};var t=arguments.length;if(3>t)return e;var r=arguments[t-1];if("string"!=typeof r)return e;var n=r.split(",");if(!n.length)return e;for(var o=1;t-1>o;o++){var i=arguments[o];if(i)for(var a in i)if(ce(i,a)){if(-1===n.indexOf(a))continue;var f=i[a];e[a]=f}}return e}function S(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n in r)if(ce(r,n)){var o=r[n];if(ye(e))for(var i=0;i<e.length;i++){var a=e[i];ce(a,n)||(a[n]=o)}else ce(e,n)||(e[n]=o)}}return e}function K(e){e.evts.removeAll(),delete e.evts}function j(e){ce(e,"evts")&&K(e);var t=d(e,"hse",!0);t.forEach(K)}function C(t){if(ce(t,"ref")){var r=ce(t,"refScope")&&"parent"===t.refScope?t.parentNode:t.root_;return void(ce(r,"refs")&&r.refs.removeRef(t.ref))}if(ce(t,"directRef")){var n=t.directRef;e(n)&&""!==n&&delete t.root_[n]}}function A(e){ce(e,"refs")&&(e.refs.removeAll(),delete e.refs),ce(e,"ref")?C(e):ce(e,"directRef")&&delete root[e.directRef];var t=d(e,"hsr",!0);t.forEach(C)}function R(e){e.forEach(function(e,t){e.nodeType===Node.ELEMENT_NODE&&(A(e),j(e)),e.parentNode.removeChild(e)})}function L(e){return this.__data[e]}function M(e,t){var r=this.__tpl[e],n=this.__owner;this.__data[e]=t;for(var o=0,i=r.length;i>o;o++){var a,f=r[o],l=f.parent,c=f.groupKey,s=p(l,"groupKey",c),n=this.__owner;f["for"]=t,s.length&&(a=u(s).nextSibling),R(s),U(l,f,c,n,a)}}function P(e,t,r,n){return ce(n,"observe")||(n.observe=new Oe(n)),n.observe.add(e,t,r,n),n.observe}function q(){}function D(t,r,n){var o,i;if(ce(r,"ref")){if(o=r.ref,""===o||!e(o))return;var a=ce(r,"refScope")&&"parent"===r.refScope?t:n;ce(a,"refs")||(a.refs=new q),i=a.refs}else{if(!ce(r,"directRef"))return;if(o=r.directRef,""===o||!e(o))return;i=n}i[o]=r,r.hsr=!0}function T(e,t,r){r?e.insertBefore(t,r):e.appendChild(t)}function V(e){var t=e.setups;return t?t.__configs.defaults:null}function B(e){var t=e.setups;return t?ce(t,"items")?t.items:ce(t,"children")?t.children:null:null}function F(e,t){var r=e.setups,n=r.__configs,o=r.__events,i=o.length,a=e.style;for(var f in t)if(ce(t,f)){var u=t[f],l=$e.indexOf(f);if(-1==l)e[f]=u;else if(Ge>l)a[f]=isNaN(u)?u:u+"px";else if(Je>l)a[f]=u;else if(Qe>l)ce(n,"defaults")||ae(n,"defaults",{value:de()}),x(n.defaults,u);else if(Ue>l)r[f]=u;else if(Xe>l)r.children=u;else if(Ye>l)u.forEach(function(e){o[i++]=e});else if(et>l)o[i++]=x({type:f},u);else if(tt>l)r[f]=u;else if(nt>l){if(!u)continue;ce(r,"cls")||(r.cls=""),r.cls+=u+" "}else ot>l?e.appendChild(document.createTextNode(u)):ae(r,"parent",{value:u})}}function z(e){var t=e.setups;t&&ce(t,"attrs")&&a(t.attrs,function(t,r){e.setAttribute(g(r),t)})}function H(e){var t=e.setups;if(t&&ce(t,"style")){var r=e.style,n=t.style;for(var o in n)if(ce(n,o)){var i=n[o];-1!==Se.indexOf(o)?r[o]=isNaN(i)?i:i+"px":r[o]=i}}}function I(e,t){var r=e.setups;if(r&&ce(r,"__events"))for(var n=0,o=r.__events,i=o.length;i>n;n++){var a=o[n];k(e,a,t)}}function W(e){var t=e.setups;t&&ce(t,"cls")&&t.cls&&(e.className=t.cls.trim())}function Z(e,r){var n=e.setups;n&&ce(n,"created")&&t(n.created)&&n.created.call(r,e,r)}function $(e){if(ce(e,"if")&&!y(e["if"]))return null;var t=ce(e,"tag")?e.tag:"div",r=document.createElement(t);return te(r),F(r,e),r}function G(e,t,r){var n=V(e),o=S(t,n),i=$(o);return i?(z(i),H(i),I(i,r),W(i),i.root_=r,i):null}function J(e,t,r,n){if(null!==t&&"undefined"!=typeof t){if(D(e,t,r),T(e,t,n),ce(t,"d__isCmp"))return void(t.root_=r);var o=B(t);Y(t,o,r),Z(t,r)}}function Q(t,r,o,i){var a=null;return ye(r)||"function"==typeof r?null:(ve(r)?a=ce(r,"ctype")?ne(r):G(t,r,o):e(r)?a=document.createTextNode(r):n(r)&&(a=r),i&&a&&(a.groupKey=i),a)}function U(e,t,r,n,o){var i=t["for"];if(i){var a,f,u,l=ce(t,"root")?i[t.root]:i,c=t.tplFn;if(l&&"function"==typeof c){var s=n;if(ce(t,"scope")){var v=opts.scope;s="root"===v?n:"parent"===v?parent:v}if(ye(l))l.forEach(function(t,i){f=c.call(s,t,i),u=Q(e,f,n,r),u&&J(e,u,n,o)});else if(ve(l)&&t.alwaysIterate){var p=fe(l);a=p.forEach(function(t,i){return f=c.call(s,l[t],t),u=Q(e,f,n,r),u&&J(e,u,n,o),u})}else f=c.call(s,l),ye(f)||(f=[f]),a=f.forEach(function(t,i){return u=Q(e,t,n,r),u&&J(e,u,n,o),u})}}}function X(t,r,n){var o;if(ce(r,"observeProp")){var i=r.observeProp,o=it++;if(i&&e(i)&&"__owner"!==i){P(t,r,o,n)}}U(t,r,o,n)}function Y(e,t,r){if(t){var o;if(ve(t))return ce(t,"ctype")?(o=ne(t),void J(e,o,r)):void(ce(t,"for")?X(e,t,r):(o=G(e,t,r),J(e,o,r)));if(ye(t))return void t.forEach(function(t){Y(e,t,r)});if("function"==typeof t){var i=t();return void Y(e,i,r)}n(t)?J(e,t,r):J(e,document.createTextNode(t),r)}}function ee(e){var t=e.setups;if(t){var r=B(e);Y(e,r,e)}}function te(e){var t=de();ie(t,{__configs:{value:de()},__events:{value:[]}}),e.setups=t}function re(e){var r=ce(e,"tag")?e.tag:"div",n=document.createElement(r);ae(n,"d__isCmp",{value:!0}),te(n),F(n,e),z(n),H(n),I(n,n),W(n),ee(n);var o=n.setups;return ce(o,"created")&&t(o.created)&&o.created.call(n,n,n),ce(o,"parent")&&(o.parent.appendChild(n),ce(o,"appended")&&o.appended.call(n)),n}function ne(e){var t=e.ctype,r=xe.get(t).create(e);ce(e,"ref")?(r.ref=e.ref,ce(e,"refScope")&&(r.refScope=e.refScope)):ce(e,"directRef")&&(r.directRef=e.directRef);var n=re(r);return n.ctype=t,n}function oe(e){return ce(e,"ctype")?ne(e):re(e)}var ie=Object.defineProperties,ae=Object.defineProperty,fe=Object.keys,ue=Object.prototype,le=ue.hasOwnProperty,ce=function(e,t){return le.call(e,t)},se=Object.prototype.toString,ve=function(e){return"[object Object]"===se.call(e)},pe=Object.create,de=function(e){var t=pe(null);for(var r in e)ce(e,r)&&(t[r]=e[r]);return t},he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},ye=Array.isArray,ge=window.isFinite,me=/([A-Z])/g,_e=[],be=Element.prototype,we=be.matches||be.matchesSelector||be.msMatchesSelector||be.webkitMatchesSelector||be.mozMatchesSelector||be.oMatchesSelector,Ne=["keydown","keypress","keyup","input"],Ee=["blur","focus"];w.__proto__=Array.prototype,w.prototype=Object.create(Array.prototype),ie(w.prototype,{removeAll:{value:function(){for(var e=0;e<this.length;e++)this[e].destroy();this.length=0}},remove:{value:function(e){var t=this.indexOf(e);-1!==t&&(e.destroy(),this.splice(t,1))}}});var ke=de(),xe=de();ie(xe,{register:{value:function(e,r){if(ce(ke,e))throw Error("Name already registered");if(!t(r))throw Error("Not valid definitions");return ae(ke,e,{value:de({create:r})}),this}},get:{value:function(e){if(!ke[e])throw Error("No component registered");return ke[e]}}});var Oe=function(e){if(!e)throw new Error("No root provided");ie(this,{__owner:{value:e},__data:{value:de()},__tpl:{value:de()}})};ie(Oe.prototype,{add:{value:function(e,t,r,n){var o=t.observeProp,t=O(de({parent:e,groupKey:r}),t,"tplFn,scope,for,root,observeProp,alwaysIterate"),i=t["for"],a=ce(this,o);a?this.__tpl[o].push(t):(this.__data[o]=i,this.__tpl[o]=[t],ae(this,o,{get:L.bind(this,o),set:M.bind(this,o)}))}},insert:{value:function(e,t,r){e=""+e;var n=this[e];if(!n||!ye(n))throw new Error("Value for property ["+e+"] is not an array.");if(isNaN(t))return void(arguments.length>1&&this.push.apply(this,arguments));var o,i=n.length,a=t;if(!(t>i||0>t)){if(ye(r)){o=r;for(var f=0;f<r.length;f++)n.splice(a++,0,r[f])}else o=[r],n.splice(a,0,r);for(var u=this.__tpl[e],f=0,l=u.length;l>f;f++){var c=u[f],s=c.parent,p=c.groupKey,d=v(s,t,"groupKey",p),h=this.__owner;d&&(c["for"]=o,U(s,c,p,h,d))}}}},remove:{value:function(e,t){e=""+e;var r=this[e];if(!r||!ye(r))throw new Error("Value for property ["+e+"] is not an array.");var n=r.length;if(ye(t)||(t=[t]),!f(t,isNaN)){var o=this.__tpl[e];t.sort();for(var i=0,a=o.length;a>i;i++)for(var u=o[i],l=u.parent,c=u.groupKey,s=0,p=0,d=t.length;d>p;p++){var h=t[i];if(!(h>n||0>t)){var y=v(l,h,"groupKey",c);y&&(R([y]),r.splice(h-s++,1))}}}}},push:{value:function(e,t){e=""+e;var r=this[e];if(!r||!ye(r))throw new Error("Value for property ["+e+"] is not an array.");var n,o=r.length;if(ye(t)){n=t;for(var i=0;i<t.length;i++)r[o++]=t[i]}else n=[t],r[o++]=t;for(var a=this.__tpl[e],i=0,f=a.length;f>i;i++){var l,c=a[i],s=c.parent,v=c.groupKey,d=u(p(s,"groupKey",v)),h=this.__owner;d&&(l=d.nextSibling),c["for"]=n,U(s,c,v,h,l)}return r.length}},pop:{value:function(e){e=""+e;var t=this[e];if(!t||!ye(t))throw new Error("Value for property ["+e+"] is not an array.");for(var r=this.__tpl[e],n=[],o=0,i=0,a=r.length;a>i;i++){var f=r[i],u=f.parent,l=f.groupKey,c=s(u,"groupKey",l);c&&(n[o++]=c)}R(n),t.pop()}},shift:{value:function(e){e=""+e;var t=this[e];if(!t||!ye(t))throw new Error("Value for property ["+e+"] is not an array.");for(var r=this.__tpl[e],n=[],o=0,i=0,a=r.length;a>i;i++){var f=r[i],u=f.parent,l=f.groupKey,s=c(u,"groupKey",l);s&&(n[o++]=s)}R(n),t.shift()}},unshift:{value:function(e,t){e=""+e;var r=this[e];if(!r||!ye(r))throw new Error("Value for property ["+e+"] is not an array.");var n;r.length;if(ye(t)){n=t;for(var o=0;o<t.length;o++)r.unshift(t[o])}else n=[t],r.unshift(t);for(var i=this.__tpl[e],o=0,a=i.length;a>o;o++){var f=i[o],l=f.parent,s=f.groupKey,v=(u(p(l,"groupKey",s)),c(l,"groupKey",s)),d=this.__owner;f["for"]=n,U(l,f,s,d,v)}return r.length}}}),ie(q.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=Object.keys(this),r=0,n=0;n<t.length;n++){var o=t[n];e.call(null,this[o],o)&&(r+=delete this[o]?1:0)}return r==t.length}},removeRef:{value:function(r){if(e(r)){if(r=""+r,ce(this,r))return delete this[r]}else if(t(r)){for(var n=Object.keys(this),o=0,i=0;i<n.length;i++){var a=n[i];expression.call(null,this[a],a)&&(o+=delete this[a]?1:0)}return o==n.length}return!1}},removeAll:{value:function(){for(var e=Object.keys(this),t=0;t<e.length;t++)delete this[e[t]];return t===e.length}}});var Se=["width","height","maxWidth","minWidth","maxHeight","minHeight"];!["","Top","Right","Bottom","Left"].forEach(function(e){Se.push("padding"+e),Se.push("margin"+e)});var Ke=Se,je=["color","backgroundColor","background","display","position","border","transform","opacity","fontSize"],Ce=["defaults"],Ae=["style","attrs"],Re=["children","items"],Le=["events"],Me=(Ke.concat(je),["click","mousedown","mouseup","mouseover","mouseout","mouseenter","mouseleave","mousemove"]),Pe=["dragstart","dragend","drag","dragover","dragenter","dragleave","drop"],qe=["blur","focus"],De=["keydown","keypress","keyup"],Te=["change","input","submit"],Ve=["touchstart","touchmove","touchend"],Be=["wheel","scroll"],Fe=Me.concat(Pe,qe,De,Te,Ve,Be),ze=["created","appended"],He=["className","cls"],Ie=["xtraCls","xCls"],We=(Ie.concat(He),["text","textContent"]),Ze=["parent"],$e=Ke.concat(je,Ce,Ae,Re,Le,Fe,ze,He,Ie,We,Ze),Ge=Ke.length,Je=Ge+je.length,Qe=Je+Ce.length,Ue=Qe+Ae.length,Xe=Ue+Re.length,Ye=Xe+Le.length,et=Ye+Fe.length,tt=et+ze.length,rt=tt+He.length,nt=rt+Ie.length,ot=nt+We.length,it=Math.floor(1e5*Math.random()),at=de();return ie(at,{create:{value:oe},query:{value:l},queryDirect:{value:c},queryLastDirect:{value:s},queryAll:{value:d},queryAllDirect:{value:p},queryAllByMultipleKeys:{value:h},attachEvent:{value:k},register:{value:function(e,t){return xe.register(e,t),this}}}),at});