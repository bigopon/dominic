!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Dominic",t):e.Dominic=t()}(this,function(){"use strict";function e(e){var t="undefined"==typeof e?"undefined":ge(e);return"string"===t||"number"===t}function t(e){return"function"==typeof e}function r(e,t){if(!me(e))return!1;for(var r=e.length,n=0;r>n;n++)if(ge(e[n])!==t)return!1;return!0}function n(e){return e instanceof Node}function o(e){return!isNaN(e)&&_e(e)}function i(e){e=e||[];var t=arguments.length;if(2>t)return e;for(var r=e.length,n=1;t>n;n++)for(var o=arguments[n],i=0;i<o.length;i++)e[r++]=o[i];return e}function a(e,t,r){for(var n in e)ve(e,n)&&t.call(r,e[n],n)}function f(e,t,r){if(!e||!e.length)return!1;for(var n=e.length,o=0;n>o;o++)if(t.call(r,e[o],o,e))return!0;return!1}function u(e){return e?e[e.length-1]:null}function l(e,t,r){for(var n=null,o=e.childNodes,i=o.length,a=0;i>a;a++){var f=o[a];if(n=!ve(f,t)||"undefined"!=typeof r&&f[t]!==r?l(f,t,r):f)return n}return n}function c(e,t,r){for(var n=e.childNodes,o=n.length,i=0;o>i;i++){var a=n[i];if(ve(a,t)&&("undefined"==typeof r||a[t]===r))return a}return null}function s(e,t,r){for(var n=e.childNodes,o=n.length,i=o-1;i>-1;i++){var a=n[i];if(ve(a,t)&&("undefined"==typeof r||a[t]===r))return a}return null}function v(e,t,r,n){for(var o=e.childNodes,i=o.length,a=-1,f=0;i>f;f++){var u=o[f];if(-1===a&&(!ve(u,r)||"undefined"!=typeof n&&u[r]!==n||-1===a&&(a=f)),-1!==a&&f-a===t)return u}return null}function p(e,t,r){for(var n=[],o=e.childNodes,i=o.length,a=0,f=0;i>f;f++){var u=o[f];!ve(u,t)||"undefined"!=typeof r&&u[t]!==r||(n[a++]=u)}return n}function d(e,t,r){for(var n=[],o=e.childNodes,a=o.length,f=0;a>f;f++){var u=o[f];!ve(u,t)||"undefined"!=typeof r&&u[t]!==r||(n[n.length]=u),i(n,d(u,t,r))}return n}function h(e,t){if(t)for(var r=Object.keys(t),n=r.length,o=[],a=e.childNodes,f=a.length,u=0,l=0;f>l;l++){for(var c=a[l],s=0;n>s;s++){var v=r[s];if(ve(c,v)&&("undefined"==typeof value||c[v]===value)){o[u++]=c;break}}i(o,h(c,t))}}function y(e){return!!("function"==typeof e?e():e)}function g(e){return e.replace(be,"-$1").toLowerCase()}function m(e){var t=e.id?"#"+e.id:"",r=e.classList.toString(),n=r?r.split(" "):we,o=e.localName+t+(n.length?"."+n.join("."):"");return o}function _(e,t){return ke.call(e,t)}function b(e,t,r){for(;t&&t!==e;){if(_(t,r))return t;t=t.parentNode}return null}function w(){}function E(e,t){function r(e){u&&!u.call(t,e)||(f>-1?(f--&&i.call(t,e),f||(o.evts.remove(r),l&&l.call(t,e))):i.call(t,e))}var n=e.type,o=e.el,i=e.callback,a=e.capture,f=e.count,u=e.validator,l=e.finishCount;return r.destroy=function(){return o.removeEventListener(n,r,a)},o.addEventListener(n,r,a),r}function k(e,t){function r(e){if(o!==e.target){var n=b(o,e.target,f);n&&(l&&!l.call(t,e,n,f)||(u>-1?(u--&&i.call(t,e,n,f),u||(o.evts.remove(r),c&&c.call(t,e,n,f))):i.call(t,e,n,f)))}}var n=e.type,o=e.el,i=e.callback,a=e.capture,f=e.delegate,u=e.count,l=e.validator,c=e.finishCount;return r.destroy=function(){return o.removeEventListener(n,r,a)},o.addEventListener(n,r,a),r}function N(e,t){function r(e){f&&-1===f.indexOf(e.keyCode)||l&&!l.call(t,e)||(u>-1?(u--&&i.call(t,e),u||(o.evts.remove(r),c&&c.call(t,e))):i.call(t,e))}var n=e.type,o=e.el,i=e.callback,a=e.capture,f=e.keys,u=e.count,l=e.validator,c=e.finishCount;return r.destroy=function(){return o.removeEventListener(n,r,a)},o.addEventListener(n,r,a),r}function C(e,t){function r(e){if(o!==e.target){var n=b(o,e.target,f);n&&(u&&-1===u.indexOf(e.keyCode)||c&&!c.call(t,e,n,f)||(l>-1?(l--&&i.call(t,e,n,f),l||(o.evts.remove(r),s&&s.call(t,e,n,f))):i.call(t,e,n,f)))}}var n=e.type,o=e.el,i=e.callback,a=e.capture,f=e.delegate,u=e.keys,l=e.count,c=e.validator,s=e.finishCount;return r.destroy=function(){return o.removeEventListener(n,r,a)},o.addEventListener(n,r,a),r}function x(e,t,n){var i=t.type;if(!i)throw new Error("No event type specified");var a,f=t.handler,u="undefined"==typeof f?"undefined":ge(f),l="root"===t.scope?n:ve(t,"scope")?t.scope:e;if("function"===u?a=f:"string"===u&&(a=l[f]),"function"!=typeof a)throw new Error('Cannot find handler: "'+f+'" on element: ['+m(l)+"].");var c,s=!!t.capture,v=t.delegate,p=-1!==Ne.indexOf(i),d=-1!==Ce.indexOf(i),h=ve(t,"count")&&o(t.count)?t.count:-1,y=(t.single===!0,null),g=null;if(ve(t,"validator")){var _=t.validator,b="undefined"==typeof _?"undefined":ge(_);"string"===b?y=l[_]:"function"===b&&(y=_),"function"!=typeof y&&(y=null)}if(ve(t,"finishCount")){var x=t.finishCount,O="undefined"==typeof x?"undefined":ge(x);"string"===O?g=l[x]:"function"===O&&(g=x),"function"!=typeof g&&(g=null)}if(p){var S=null;ve(t,"key")&&("number"==typeof t.key?S=[t.key]:r(t.key,"number")&&(S=t.key)),c=v&&"string"==typeof v?C({type:i,el:e,callback:a,capture:s,delegate:v,keys:S,count:h,validator:y,finishCount:g},l):N({type:i,el:e,callback:a,capture:s,keys:S,count:h,validator:y,finishCount:g},l)}else d&&v&&(s=!0),c=v&&"string"==typeof v?k({type:i,el:e,callback:a,capture:s,delegate:v,count:h,validator:y,finishCount:g},l):E({type:i,el:e,callback:a,capture:s,count:h,validator:y,finishCount:g},l);ve(e,"evts")||(e.evts=new w),e.evts.push(c),e.hse=!0}function O(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n in r)ve(r,n)&&(e[n]=r[n])}return e}function S(e){e=e||{};var t=arguments.length;if(3>t)return e;var r=arguments[t-1];if("string"!=typeof r)return e;var n=r.split(",");if(!n.length)return e;for(var o=1;t-1>o;o++){var i=arguments[o];if(i)for(var a in i)if(ve(i,a)){if(-1===n.indexOf(a))continue;var f=i[a];e[a]=f}}return e}function K(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n in r)if(ve(r,n)){var o=r[n];if(me(e))for(var i=0;i<e.length;i++){var a=e[i];ve(a,n)||(a[n]=o)}else ve(e,n)||(e[n]=o)}}return e}function j(e){e.evts.removeAll(),delete e.evts}function A(e){ve(e,"evts")&&j(e);var t=d(e,"hse",!0);t.forEach(j)}function L(t){if(ve(t,"ref")){var r=ve(t,"refScope")&&"parent"===t.refScope?t.parentNode:t.root_;return void(ve(r,"refs")&&r.refs.removeRef(t.ref))}if(ve(t,"directRef")){var n=t.directRef;e(n)&&""!==n&&delete t.root_[n]}}function R(e){ve(e,"refs")&&(e.refs.removeAll(),delete e.refs),ve(e,"ref")?L(e):ve(e,"directRef")&&delete root[e.directRef];var t=d(e,"hsr",!0);t.forEach(L)}function M(e){e.forEach(function(e,t){e.nodeType===Node.ELEMENT_NODE&&(R(e),A(e)),e.parentNode.removeChild(e)})}function P(e){return this.__data[e]}function q(e,t){var r=this.__tpl[e],n=this.__owner;this.__data[e]=t;for(var o=0,i=r.length;i>o;o++){var a,f=r[o],l=f.parent,c=f.groupKey,s=p(l,"groupKey",c),n=this.__owner;f["for"]=t,s.length&&(a=u(s).nextSibling),M(s),Y(l,f,c,n,a)}}function D(e,t,r,n){return ve(n,"observe")||(n.observe=new Se(n)),n.observe.add(e,t,r,n),n.observe}function T(){}function V(t,r,n){var o,i;if(ve(r,"ref")){if(o=r.ref,""===o||!e(o))return;var a=ve(r,"refScope")&&"parent"===r.refScope?t:n;ve(a,"refs")||(a.refs=new T),i=a.refs}else{if(!ve(r,"directRef"))return;if(o=r.directRef,""===o||!e(o))return;i=n}i[o]=r,r.hsr=!0}function B(e,t,r){r?e.insertBefore(t,r):e.appendChild(t)}function F(e){var t=e.setups;return t?t.__configs.defaults:null}function z(e){var t=e.setups;return t?ve(t,"items")?t.items:ve(t,"children")?t.children:null:null}function H(e,t){var r=e.setups,n=r.__configs,o=r.__events,i=o.length,a=e.style;for(var f in t)if(ve(t,f)){var u=t[f],l=Je.indexOf(f);if(-1==l)e[f]=u;else if(Qe>l)a[f]=isNaN(u)?u:u+"px";else if(Ue>l)a[f]=u;else if(Xe>l)ve(n,"defaults")||ue(n,"defaults",{value:ye()}),O(n.defaults,u);else if(Ye>l)r[f]=u;else if(et>l)r.children=u;else if(tt>l)u.forEach(function(e){o[i++]=e});else if(rt>l)o[i++]=O({type:f},u);else if(nt>l)r[f]=u;else if(it>l){if(!u)continue;ve(r,"cls")||(r.cls=""),r.cls+=u+" "}else at>l?e.appendChild(document.createTextNode(u)):ue(r,"parent",{value:u})}}function I(e){var t=e.setups;t&&ve(t,"attrs")&&a(t.attrs,function(t,r){e.setAttribute(g(r),t)})}function W(e){var t=e.setups;if(t&&ve(t,"style")){var r=e.style,n=t.style;for(var o in n)if(ve(n,o)){var i=n[o];-1!==Ke.indexOf(o)?r[o]=isNaN(i)?i:i+"px":r[o]=i}}}function Z(e,t){var r=e.setups;if(r&&ve(r,"__events"))for(var n=0,o=r.__events,i=o.length;i>n;n++){var a=o[n];x(e,a,t)}}function $(e){var t=e.setups;t&&ve(t,"cls")&&t.cls&&(e.className=t.cls.trim())}function G(e,r){var n=e.setups;n&&ve(n,"created")&&t(n.created)&&n.created.call(r,e,r)}function J(e){if(ve(e,"if")&&!y(e["if"]))return null;var t=ve(e,"tag")?e.tag:"div",r=document.createElement(t);return ne(r),H(r,e),r}function Q(e,t,r){var n=F(e),o=K(t,n),i=J(o);return i?(I(i),W(i),Z(i,r),$(i),ve(i,"hide")&&y(i.hide)&&(i.style.display="none"),i.root_=r,i):null}function U(e,t,r,n){if(null!==t&&"undefined"!=typeof t){if(V(e,t,r),B(e,t,n),ve(t,"d__isCmp"))return ve(t,"hide")&&(t.style.display="none"),void(t.root_=r);var o=z(t);te(t,o,r),G(t,r)}}function X(t,r,o,i){var a=null;return me(r)||"function"==typeof r?null:(de(r)?a=ve(r,"ctype")?ie(r):Q(t,r,o):e(r)?a=document.createTextNode(r):n(r)&&(a=r),i&&a&&(a.groupKey=i),a)}function Y(e,t,r,n,o){var i=t["for"];if(i){var a,f,u,l=ve(t,"root")?i[t.root]:i,c=t.tplFn;if(l&&"function"==typeof c){var s=n;if(ve(t,"scope")){var v=opts.scope;s="root"===v?n:"parent"===v?parent:v}if(me(l))l.forEach(function(t,i){f=c.call(s,t,i),u=X(e,f,n,r),u&&U(e,u,n,o)});else if(de(l)&&t.alwaysIterate){var p=le(l);a=p.forEach(function(t,i){return f=c.call(s,l[t],t),u=X(e,f,n,r),u&&U(e,u,n,o),u})}else f=c.call(s,l),me(f)||(f=[f]),a=f.forEach(function(t,i){return u=X(e,t,n,r),u&&U(e,u,n,o),u})}}}function ee(t,r,n){var o;if(ve(r,"observeProp")){var i=r.observeProp,o=ft++;if(i&&e(i)&&"__owner"!==i){D(t,r,o,n)}}Y(t,r,o,n)}function te(e,t,r){if(t){var o;if(de(t))return ve(t,"ctype")?(o=ie(t),void U(e,o,r)):void(ve(t,"for")?ee(e,t,r):(o=Q(e,t,r),U(e,o,r)));if(me(t))return void t.forEach(function(t){te(e,t,r)});if("function"==typeof t){var i=t();return void te(e,i,r)}n(t)?U(e,t,r):U(e,document.createTextNode(t),r)}}function re(e){var t=e.setups;if(t){var r=z(e);te(e,r,e)}}function ne(e){var t=ye();fe(t,{__configs:{value:ye()},__events:{value:[]}}),e.setups=t}function oe(e){var r=ve(e,"tag")?e.tag:"div",n=document.createElement(r);ue(n,"d__isCmp",{value:!0}),ne(n),H(n,e),I(n),W(n),Z(n,n),$(n),re(n);var o=n.setups;return ve(o,"created")&&t(o.created)&&o.created.call(n,n,n),ve(o,"parent")&&(o.parent.appendChild(n),ve(o,"appended")&&o.appended.call(n)),n}function ie(e){var t=e.ctype,r=Oe.get(t).create(e);ve(e,"ref")?(r.ref=e.ref,ve(e,"refScope")&&(r.refScope=e.refScope)):ve(e,"directRef")&&(r.directRef=e.directRef),ve(e,"hide")&&(r.hide=e.hide);var n=oe(r);return n.ctype=t,n}function ae(e){return ve(e,"ctype")?ie(e):oe(e)}var fe=Object.defineProperties,ue=Object.defineProperty,le=Object.keys,ce=Object.prototype,se=ce.hasOwnProperty,ve=function(e,t){return se.call(e,t)},pe=Object.prototype.toString,de=function(e){return"[object Object]"===pe.call(e)},he=Object.create,ye=function(e){var t=he(null);for(var r in e)ve(e,r)&&(t[r]=e[r]);return t},ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},me=Array.isArray,_e=window.isFinite,be=/([A-Z])/g,we=[],Ee=Element.prototype,ke=Ee.matches||Ee.matchesSelector||Ee.msMatchesSelector||Ee.webkitMatchesSelector||Ee.mozMatchesSelector||Ee.oMatchesSelector,Ne=["keydown","keypress","keyup","input"],Ce=["blur","focus"];w.__proto__=Array.prototype,w.prototype=Object.create(Array.prototype),fe(w.prototype,{removeAll:{value:function(){for(var e=0;e<this.length;e++)this[e].destroy();this.length=0}},remove:{value:function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return this.splice(t,1),void e.destroy()}}});var xe=ye(),Oe=ye();fe(Oe,{register:{value:function(e,r){if(ve(xe,e))throw Error("Name already registered");if(!t(r))throw Error("Not valid definitions");return ue(xe,e,{value:ye({create:r})}),this}},get:{value:function(e){if(!xe[e])throw Error("No component registered");return xe[e]}}});var Se=function(e){if(!e)throw new Error("No root provided");fe(this,{__owner:{value:e},__data:{value:ye()},__tpl:{value:ye()}})};fe(Se.prototype,{add:{value:function(e,t,r,n){var o=t.observeProp,t=S(ye({parent:e,groupKey:r}),t,"tplFn,scope,for,root,observeProp,alwaysIterate"),i=t["for"],a=ve(this,o);a?this.__tpl[o].push(t):(this.__data[o]=i,this.__tpl[o]=[t],ue(this,o,{get:P.bind(this,o),set:q.bind(this,o)}))}},insert:{value:function(e,t,r){e=""+e;var n=this[e];if(!n||!me(n))throw new Error("Value for property ["+e+"] is not an array.");if(isNaN(t))return void(arguments.length>1&&this.push.apply(this,arguments));var o,i=n.length,a=t;if(!(t>i||0>t)){if(me(r)){o=r;for(var f=0;f<r.length;f++)n.splice(a++,0,r[f])}else o=[r],n.splice(a,0,r);for(var u=this.__tpl[e],f=0,l=u.length;l>f;f++){var c=u[f],s=c.parent,p=c.groupKey,d=v(s,t,"groupKey",p),h=this.__owner;d&&(c["for"]=o,Y(s,c,p,h,d))}}}},remove:{value:function(e,t){e=""+e;var r=this[e];if(!r||!me(r))throw new Error("Value for property ["+e+"] is not an array.");var n=r.length;if(me(t)||(t=[t]),!f(t,isNaN)){var o=this.__tpl[e];t.sort();for(var i=0,a=o.length;a>i;i++)for(var u=o[i],l=u.parent,c=u.groupKey,s=0,p=0,d=t.length;d>p;p++){var h=t[i];if(!(h>n||0>t)){var y=v(l,h,"groupKey",c);y&&(M([y]),r.splice(h-s++,1))}}}}},push:{value:function(e,t){e=""+e;var r=this[e];if(!r||!me(r))throw new Error("Value for property ["+e+"] is not an array.");var n,o=r.length;if(me(t)){n=t;for(var i=0;i<t.length;i++)r[o++]=t[i]}else n=[t],r[o++]=t;for(var a=this.__tpl[e],i=0,f=a.length;f>i;i++){var l,c=a[i],s=c.parent,v=c.groupKey,d=u(p(s,"groupKey",v)),h=this.__owner;d&&(l=d.nextSibling),c["for"]=n,Y(s,c,v,h,l)}return r.length}},pop:{value:function(e){e=""+e;var t=this[e];if(!t||!me(t))throw new Error("Value for property ["+e+"] is not an array.");for(var r=this.__tpl[e],n=[],o=0,i=0,a=r.length;a>i;i++){var f=r[i],u=f.parent,l=f.groupKey,c=s(u,"groupKey",l);c&&(n[o++]=c)}M(n),t.pop()}},shift:{value:function(e){e=""+e;var t=this[e];if(!t||!me(t))throw new Error("Value for property ["+e+"] is not an array.");for(var r=this.__tpl[e],n=[],o=0,i=0,a=r.length;a>i;i++){var f=r[i],u=f.parent,l=f.groupKey,s=c(u,"groupKey",l);s&&(n[o++]=s)}M(n),t.shift()}},unshift:{value:function(e,t){e=""+e;var r=this[e];if(!r||!me(r))throw new Error("Value for property ["+e+"] is not an array.");var n;r.length;if(me(t)){n=t;for(var o=0;o<t.length;o++)r.unshift(t[o])}else n=[t],r.unshift(t);for(var i=this.__tpl[e],o=0,a=i.length;a>o;o++){var f=i[o],l=f.parent,s=f.groupKey,v=(u(p(l,"groupKey",s)),c(l,"groupKey",s)),d=this.__owner;f["for"]=n,Y(l,f,s,d,v)}return r.length}}}),fe(T.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=Object.keys(this),r=0,n=0;n<t.length;n++){var o=t[n];e.call(null,this[o],o)&&(r+=delete this[o]?1:0)}return r==t.length}},removeRef:{value:function(r){if(e(r)){if(r=""+r,ve(this,r))return delete this[r]}else if(t(r)){for(var n=Object.keys(this),o=0,i=0;i<n.length;i++){var a=n[i];expression.call(null,this[a],a)&&(o+=delete this[a]?1:0)}return o==n.length}return!1}},removeAll:{value:function(){for(var e=Object.keys(this),t=0;t<e.length;t++)delete this[e[t]];return t===e.length}}});var Ke=["width","height","maxWidth","minWidth","maxHeight","minHeight"];!["","Top","Right","Bottom","Left"].forEach(function(e){Ke.push("padding"+e),Ke.push("margin"+e)});var je=Ke,Ae=["color","backgroundColor","background","display","position","border","transform","opacity","fontSize"],Le=["defaults"],Re=["style","attrs"],Me=["children","items"],Pe=["events"],qe=(je.concat(Ae),["click","mousedown","mouseup","mouseover","mouseout","mouseenter","mouseleave","mousemove"]),De=["dragstart","dragend","drag","dragover","dragenter","dragleave","drop"],Te=["blur","focus"],Ve=["keydown","keypress","keyup"],Be=["change","input","submit"],Fe=["touchstart","touchmove","touchend"],ze=["wheel","scroll"],He=qe.concat(De,Te,Ve,Be,Fe,ze),Ie=["created","appended"],We=["className","cls"],Ze=["xtraCls","xCls"],$e=(Ze.concat(We),["text","textContent"]),Ge=["parent"],Je=je.concat(Ae,Le,Re,Me,Pe,He,Ie,We,Ze,$e,Ge),Qe=je.length,Ue=Qe+Ae.length,Xe=Ue+Le.length,Ye=Xe+Re.length,et=Ye+Me.length,tt=et+Pe.length,rt=tt+He.length,nt=rt+Ie.length,ot=nt+We.length,it=ot+Ze.length,at=it+$e.length,ft=Math.floor(1e5*Math.random()),ut=ye();return fe(ut,{create:{value:ae},query:{value:l},queryDirect:{value:c},queryLastDirect:{value:s},queryAll:{value:d},queryAllDirect:{value:p},queryAllByMultipleKeys:{value:h},attachEvent:{value:x},register:{value:function(e,t){return Oe.register(e,t),this}}}),ut});