!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Dominic=t()}(this,function(){var e=this||{},t=e.document,r=e.Node,n=[],o={},i=function(e,t){if(!Array.isArray(e))return!1;for(var r=0,n=e.length,o=0;n>o;o++)r+=typeof e[o]===t?1:0;return r===n},a=function(e){return e instanceof r},f=function(e){var t=typeof e;return e&&"object"===t||"function"===t},s=function(e){var t=typeof e;return"string"===t||"number"===t},u=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},l=function(e){e=e||{};for(var t=1;t<arguments.length;t++)for(var r=arguments[t],n=Object.keys(r),o=0;o<n.length;o++)e[n[o]]=r[n[o]];return e},c=function(e){if(e=e||{},arguments.length<2)return e;var t=arguments[arguments.length-1];if("string"!=typeof t)return e;var r=t.split(",");if(!r.length)return e;for(var n=1;n<arguments.length-1;n++)for(var o=arguments[n],i=Object.keys(arguments[n]),a=0;a<i.length;a++){var f=i[a];if(-1!==r.indexOf(f)){var s=o[f];e[f]=s}}return e},h=function(e){e=e||{};for(var t=1;t<arguments.length;t++)for(var r=arguments[t],n=Object.keys(arguments[t]),o=0;o<n.length;o++){var i=n[o];if(Array.isArray(e))for(k=0;k<e.length;k++)e[k].hasOwnProperty(i)||(e[k][i]=r[i]);else e.hasOwnProperty(i)||(e[i]=r[i])}return e},p=function(e){var t=e.id?"#"+e.id:"",r=e.classList.toString(),o=r?r.split(" "):n,i=e.localName+t+(o.length?"."+o.join("."):"");return i},v=function(e,t,r){for(;t&&t!==e;){if(t.matches(r))return t;t=t.parentNode}return null},d=function(e,r,n){r=r||{};var o,a,f=r.el||t.documentElement,s=r.callback,u=r.capture||!1,l=r.delegate;-1!==V.indexOf(e)&&("number"==typeof r.key?(o=!0,a=[r.key]):i(r.key,"number")&&(o=!0,a=r.key));var c=function(e){var t=e.currentTarget;if("string"==typeof l){if(t===e.target)return;var r=v(t,e.target,l);if(!r)return;if(o&&-1===a.indexOf(e.keyCode))return;"function"==typeof s&&s.call(n,e,r,l)}else{if(o&&-1===a.indexOf(e.keyCode))return;"function"==typeof s&&s.call(n,e)}};return c.destroy=function(){return this.el=null,f.removeEventListener(e,c,u)},c.el=f,c.type=e,c.capture=u,f.addEventListener(e,c,u),c},y=Object.defineProperties,g=Object.defineProperty,m=function(){var e=function(){Array.call(this)};return e.prototype=Object.create(Array.prototype),y(e.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=[],r=0,n=0;n<this.length;n++)e.call(null,this[n])&&t.push(this[n]);for(var o=0;o<t.length;o++){var i=t[o];i.destroy(),this.splice(this.indexOf(i),1),r++}return r==t.length}},removeEvent:{value:function(e,t,r){var n=this,o=[];return this.forEach(function(n){"*"!==e&&n.type!==e||"*"!==t&&n.el!==t||r&&n.capture!==r||o.push(n)}),o.forEach(function(e){e.destroy(),n.splice(n.indexOf(e),1)}),o.length}},removeAll:{value:function(){for(var e=0;e<this.length;e++)this[e].destroy();this.length=0}}}),e}(),b=function(){var e=function(){};return e.prototype=Object.create(Object.prototype),y(e.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=Object.keys(this),r=0,n=0;n<t.length;n++){var o=t[n];e.call(null,this[o],o)&&(r+=delete this[o]?1:0)}return r==t.length}},removeRef:{value:function(e){return this.hasOwnProperty(e)?delete this[e]:!1}},removeAll:{value:function(){for(var e=Object.keys(this),t=0;t<e.length;t++)delete this[e[t]];return t===e.length}}}),e}(),w=function(e,t,r){var n=t.ref;if(s(n)){var o=t.refScope,i="parent"===o?e:r;i.refs=i.refs||new b,i.refs[n]=t}},O=function(){var e=function(e){if("undefined"==typeof e)throw new Error("No root provided");y(this,{__owner:{value:e},__data:{value:{}}})};return e.prototype=Object.create(Object.prototype),y(e.prototype,{add:{value:function(e,t,r){var n=t.update?t.update.observeProp:"";if(!n||"__owner"===n||!s(n))return!1;var o=l({},r||{}),i=c({},t,{obsProp:n},"tplFn,for,root,obsProp,update");g(this,n,{get:function(){return this.__data[n]},set:function(e,t,r,n){var o=t.obsProp;for(this.__data[o]=n,t["for"]=n;e.firstChild;){var i=e.removeChild(e.firstChild);this.__owner.evts&&this.__owner.evts.remove(function(e){return i===e.el||i.contains(e.el)}),this.__owner.refs&&this.__owner.refs.remove(function(e,t){return i===e||i.contains(e)})}var a=_(e,t,this.__owner);A(e,a,this.__owner,r)}.bind(this,e,i,o)})}},push:{value:function(e,t){e=""+e;var r=this[e];if(!r||!Array.isArray(r))throw new Error("Value for property ["+e+"] is not an array.");if(Array.isArray(t))for(var n=0;n<t.length;n++)r.push(t[n]);else r.push(t);return this[e]=r,r.length}}}),e}(),_=function(e,t,r){var n=t["for"];if(!n)return null;var o,i=t.root||"",a=i?n[i]:n,f=t.tplFn;if(a&&"function"==typeof f){var s=t.scope,u="root"===s?r:"parent"===s?e:s;o=Array.isArray(a)?a.map(f,u):f.call(u,a)}return o},x=function(e,t,r,n){return r.observe=r.observe||new O(r),r.observe.add(e,t,n),r.observe},A=function(e,t,r,n){"use strict";if(f(t))if(a(t))e.appendChild(t),w(e,t,r);else if("function"==typeof t){var o=t();n&&h(o,n),A(e,o,r,n)}else if(Array.isArray(t))for(var i=0;i<t.length;i++){var u=t[i];n&&h(u,n),A(e,u,r,n)}else if(t.hasOwnProperty("for"))if(f(t.update)){var l=t.update.observeProp;if(s(l)){var c=x(e,t,r,n);c[l]=t["for"]}}else{var p=_(e,t,r);A(e,p,r,n)}else if(t.hasOwnProperty("fn")){var v=t.fn;if("function"==typeof v){var d=t.scope,y="root"===d?r:"parent"===d?e:d,g=v.call(y);A(e,g,r,n)}}else{var m=t.tag||"div";if(m&&"string"==typeof m){delete t.tag,n&&h(t,n);var b=se(m,t,r);A(e,b,r,n)}}},j=function(e,t,r){var n=t.type;if(!n)throw new Error("No event type specified");var o,i=t.handler,a=typeof i;r=r||e;var f="root"===t.scope?r:t.scope?t.scope:e;if("function"===a?o=i:"string"===a&&(o=f[i]),"function"!=typeof o)throw new Error('Cannot find handler: "'+i+'" on element: ['+p(f)+"].");var s=t.capture,u=t.delegate,l=d(n,{el:e,callback:o,capture:s,delegate:u,key:t.key},f);r.evts=r.evts||new m,r.evts.push(l)},C=function(e,t,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)j(e,t[n],r);else j(e,t,r)},P=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],i=t[o];e.setAttribute(u(o),i)}},E=["width","height","maxWidth","minWidth","maxHeight","minHeight"];!["","Top","Right","Bottom","Left"].forEach(function(e){E.push("padding"+e),E.push("margin"+e)});var N=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],i=t[o];-1!==E.indexOf(o)?e.style[o]=isNaN(i)?i:i+"px":e.style[o]=i}},L={setevents:C,setattrs:P,setstyle:N,setchildren:A,setitems:A},W=function(e,t,r,n){for(var o=0,i=t.length;i>o;o++){var a=t[o];L["set"+a.key](e,a.val,r,n)}},H=function(e,t,r){for(var n=0,o=t.length;o>n;n++){var i=t[n],a=l({},{type:i.key},i.val);j(e,a,r)}},S=function(e){var t;return t="function"==typeof e?e():e,Boolean(t)},T=["width","height","minWidth","minHeight","maxWidth","maxHeight","padding","margin"],z=["color","backgroundColor","background","display","position","border","transform","opacity","fontSize"],B=["defaults"],F=["style","children","items","attrs","events"],R=["click","mousedown","mouseup","mouseover","mouseout","mouseenter","mouseleave","mousemove"],$=["dragstart","dragend","drag","dragover","dragenter","dragout","drop"],D=["blur","focus"],V=["keydown","keypress","keyup"],Z=["change","input","submit"],q=["touchstart","touchmove","touchend"],G=["wheel","scroll"],I=R.concat($,D,V,Z,q,G),J=["created","appended"],K=["className","cls"],M=["xtraCls","xCls"],Q=["text","textContent"],U=["parent"],X=T.concat(z,B,F,I,J,K,M,Q,U),Y=T.length,ee=Y+z.length,te=ee+B.length,re=te+F.length,ne=re+I.length,oe=ne+J.length,ie=oe+K.length,ae=ie+M.length,fe=ae+Q.length,se=function(e,r,n,i){if(r=r||o,r.hasOwnProperty("if")&&!S(r["if"]))return null;var f=t.createElement(e);n=n||f;var s,u,c,h,p,v,d,y=Object.keys(r);r.hasOwnProperty("hide")&&S(r.hide)&&(delete r.hide,d=!0);for(var g=0,m=y.length;m>g;g++){var b=y[g],k=r[b],w=X.indexOf(b);-1==w?f[b]=k:Y>w?f.style[b]=isNaN(k)?k:k+"px":ee>w?f.style[b]=k:te>w?l(v=v||{},k):re>w?(s=s||[]).push({key:b,val:k}):ne>w?(u=u||[]).push({key:b,val:k}):oe>w?(c=c||{})[b]=k:ie>w?h=(h||"")+" "+k:ae>w?h=(h||"")+" "+k:fe>w?f.appendChild(t.createTextNode(k)):p=k}return s&&W(f,s,n,v),h&&(f.className+=(" "+h).trim()),u&&H(f,u,n),c&&"function"==typeof c.created&&c.created.call(f),p&&a(p)&&f===n&&(p.appendChild(f),c&&"function"==typeof c.appended&&c.appended.call(f,p)),d&&(f.style.display="none"),f},ue={createElement:function(e,t){return se(e,t)},setWindow:function(n){e=n,t=e.document,r=e.Node}};return ue});