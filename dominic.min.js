!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.CreateElement=t()}(this,function(){var e=[],t={},r=function(e){return e instanceof Node},n=function(e){return e&&"object"==typeof e},o=function(e){var t=typeof e;return"string"===t||"number"===t},a=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},i=function(e){e=e||{};for(var t=1;t<arguments.length;t++)for(var r=arguments[t],n=Object.keys(arguments[t]),o=0;o<n.length;o++)e[n[o]]=r[n[o]];return e},f=function(e){if(e=e||{},arguments.length<2)return e;var t=arguments[arguments.length-1];if("string"!=typeof t)return e;var r=t.split(",");if(!r.length)return e;for(var n=1;n<arguments.length-1;n++)for(var o=arguments[n],a=Object.keys(arguments[n]),i=0;i<a.length;i++){var f=a[i];if(-1!==r.indexOf(f)){var u=o[f];e[f]=u}}return e},u=function(t){var r=t.id?"#"+t.id:"",n=t.classList.toString(),o=n?n.split(" "):e,a=t.localName+r+(o.length?"."+o.join("."):"");return a},c=function(e,t,r){for(;t!==e;){if(t.matches(r))return t;t=t.parentNode}return null},s=function(e,t,r){t=t||{};var n=t.el||document.documentElement,o=t.callback,a=t.capture||!1,i=t.delegate,f=function(e){if("string"==typeof i){if(n===e.target)return;var t=c(n,e.target,i);if(!t)return;"function"==typeof o&&o.call(t,e)}else"function"==typeof o&&o.call(r,e)};return f.destroy=function(){return this.el=null,n.removeEventListener(e,f,a)},f.el=n,f.type=e,f.capture=a,n.addEventListener(e,f,a),f},l=Object.defineProperties,p=Object.defineProperty,v=function(){var e=function(){Array.call(this)};return e.prototype=Object.create(Array.prototype),l(e.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=[],r=0,n=0;n<this.length;n++)e.call(null,this[n])&&t.push(this[n]);for(var o=0;o<t.length;o++){var a=t[o];a.destroy(),this.splice(this.indexOf(a),1),r++}return r==t.length}},removeEvent:{value:function(e,t,r){var n=this,o=[];return this.forEach(function(n){"*"!==e&&n.type!==e||"*"!==t&&n.el!==t||r&&n.capture!==r||o.push(n)}),o.forEach(function(e){e.destroy(),n.splice(n.indexOf(e),1)}),o.length}},removeAll:{value:function(){for(var e=0;e<this.length;e++)this[e].destroy();this.length=0}}}),e}(),h=function(){var e=function(){};return e.prototype=Object.create(Object.prototype),l(e.prototype,{remove:{value:function(e){if("function"!=typeof e)return!1;for(var t=Object.keys(this),r=0,n=0;n<t.length;n++){var o=t[n];e.call(null,this[o],o)&&(r+=delete this[o]?1:0)}return r==t.length}},removeRef:{value:function(e){return this.hasOwnProperty(e)?delete this[e]:!1}},removeAll:{value:function(){for(var e=Object.keys(this),t=0;t<e.length;t++)delete this[e[t]];return t===e.length}}}),e}(),d=function(){var e=function(e){if("undefined"==typeof e)throw new Error("No root provided");this.__owner=e};return e.prototype=Object.create(Object.prototype),l(e.prototype,{add:{value:function(e,t){var r=t.update?t.update.observeProp:"";if(!r||"__owner"===r||!o(r))return!1;var n=f({},t,{appendTo:e,obsProp:r},"tplFn,for,root,appendTo,obsProp,update");p(this,r,{set:function(t){for(n["for"]=t;e.firstChild;){var r=e.removeChild(e.firstChild);this.__owner.evts.remove(function(e){return r.contains(e.el)}),this.__owner.refs.remove(function(e,t){return r===e||r.contains(e)})}var o=g(e,n,this.__owner);m(e,o,this.__owner)}})}}}),e}(),y=function(e,t,r){var n=t.ref;if(o(n)){var a=t.refScope,i="parent"===a?e:r;i.refs=i.refs||new h,i.refs[n]=t}},g=function(e,t,r){var n,o=t["for"],a=t.root||"",i=a?o[a]:o,f=t.tplFn;if(i&&"function"==typeof f){var u=t.scope,c="root"===u?r:"parent"===u?e:u;n=Array.isArray(i)?i.map(f,c):f.call(c,i)}return n};setObserver=function(e,t,r){r.observe=r.observe||new d(r),r.observe.add(e,t)};var m=function(e,t,o){"use strict";if(n(t))if(r(t))e.appendChild(t),y(e,t,o);else if(Array.isArray(t))for(var a=0;a<t.length;a++)m(e,t[a],o);else if("function"==typeof t)m(e,t(),o);else{var i=t.tag;if(i){delete t.tag;var f=U(i,t,o);m(e,f,o)}else if(t.hasOwnProperty("for")){if(!n(t["for"]))return;var u=g(e,t,o);m(e,u,o),n(t.update)&&setObserver(e,t,o)}else{var c=t.fn;if("function"==typeof c){var s=t.scope,l="root"===s?o:"parent"===s?e:s,p=c.call(l);m(e,p,o)}}}},b=function(e,t,r){var n=t.type;if(!n)throw new Error("No event type specified");var o,a=t.handler,i=typeof a;r=r||e;var f="root"===t.scope?r:t.scope?t.scope:e;if("function"===i?o=a:"string"===i&&(o=f[a]),"function"!=typeof o)throw new Error('Cannot find handler: "'+a+'" on element: ['+u(f)+"].");var c=t.capture,l=t.delegate,p=s(n,{el:e,callback:o,capture:c,delegate:l},f);r.evts=r.evts||new v,r.evts.push(p)},O=function(e,t,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)b(e,t[n],r);else b(e,t,r)},w=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],i=t[o];e.setAttribute(a(o),i)}},k=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n],a=t[o];e.style[o]=isNaN(a)?a:a+"px"}},j={setevents:O,setattrs:w,setstyle:k,setchildren:m,setitems:m},x=function(e,t){for(var r=Object.keys(t),n=r.length,o=0;n>o;o++){var a=r[o],i=t[a];e[a]=(e[a]+i).trim()}},A=function(e,t,r){for(var n=0,o=t.length;o>n;n++){var a=t[n];j["set"+a.key](e,a.val,r)}},_=function(e,t,r){for(var n=0,o=t.length;o>n;n++){var a=t[n],f=i({},{type:a.key},a.val);b(e,f,r)}},C=function(e){var t;return t="function"==typeof e?e():e,Boolean(t)},E=["width","height","maxWidth","maxHeight","padding","margin"],N=["color","backgroundColor","background","display","position","opacity"],P=(E.concat(N),["style","children","items","attrs","events"]),L=["click","mousedown","mouseup","mouseover","mouseout","mouseenter","mouseleave","dragstart","dragend","drag","dragover","dragenter","dragout","drop","blur","focus","keydown","keypress","keyup","change","input","submit","touchstart","touchmove","touchend","wheel","scroll"],T=["created","appended"],F=["className","id"],S=["text","textContent"],$=["parent"],z=E.concat(N,P,L,T,F,S,$),B=E.length,H=N.length,R=P.length,W=L.length,Z=T.length,q=F.length,D=B,G=D+H,I=G+R,J=I+W,K=J+Z,M=K+q,Q=M+S.length,U=function(e,n,o,a){n=n||t;var i=document.createElement(e);o=o||i;var f,u,c,s,l,p=Object.keys(n);if(n.hasOwnProperty("if")&&!C(n["if"]))return null;for(var v=0,h=p.length;h>v;v++){var d=p[v],y=n[d],g=z.indexOf(d);-1==g?i[d]=y:G>g?i.style[d]=isNaN(y)?y:1>y?y:y+"px":I>g?(f=f||[]).push({key:d,val:y}):J>g?(u=u||[]).push({key:d,val:y}):K>g?(c=c||{})[d]=y:M>g?(s=s||{})[d]=y:Q>g?i.appendChild(document.createTextNode(y)):l=y}return s&&x(i,s),f&&A(i,f,o),u&&_(i,u,o),c&&"function"==typeof c.created&&c.created.call(i),l&&r(l)&&i===o&&(l.appendChild(i),c&&"function"==typeof c.appended&&c.appended.call(i,l)),i};return U});